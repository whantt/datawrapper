!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("../../../../../../../../static/vendor/jschardet/jschardet.min.js"),require("../../../../../../../../static/vendor/xlsx/xlsx.full.min.js")):"function"==typeof define&&define.amd?define("svelte/editor",["../../../../../../../../static/vendor/jschardet/jschardet.min.js","../../../../../../../../static/vendor/xlsx/xlsx.full.min.js"],t):e.editor=t(e.jschardet)}(this,function(jschardet){"use strict";function noop(){}function assign(e,t){for(var n in t)e[n]=t[n];return e}function appendNode(e,t){t.appendChild(e)}function insertNode(e,t,n){t.insertBefore(e,n)}function detachNode(e){e.parentNode.removeChild(e)}function detachBefore(e){for(;e.previousSibling;)e.parentNode.removeChild(e.previousSibling)}function detachAfter(e){for(;e.nextSibling;)e.parentNode.removeChild(e.nextSibling)}function reinsertChildren(e,t){for(;e.firstChild;)t.appendChild(e.firstChild)}function reinsertBefore(e,t){for(var n=e.parentNode;n.firstChild!==e;)t.appendChild(n.firstChild)}function destroyEach(e){for(var t=0;t<e.length;t+=1)e[t]&&e[t].d()}function createFragment(){return document.createDocumentFragment()}function createElement(e){return document.createElement(e)}function createText(e){return document.createTextNode(e)}function createComment(){return document.createComment("")}function addListener(e,t,n){e.addEventListener(t,n,!1)}function removeListener(e,t,n){e.removeEventListener(t,n,!1)}function setAttribute(e,t,n){e.setAttribute(t,n)}function setStyle(e,t,n){e.style.setProperty(t,n)}function selectOption(e,t){for(var n=0;n<e.options.length;n+=1){var r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function selectValue(e){var t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function blankObject(){return Object.create(null)}function destroy(e){this.destroy=noop,this.fire("destroy"),this.set=this.get=noop,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function _differs(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function _differsImmutable(e,t){return e!=e?t==t:e!==t}function fire(e,t){var n=e in this._handlers&&this._handlers[e].slice();if(n)for(var r=0;r<n.length;r+=1){var a=n[r];a.__calling||(a.__calling=!0,a.call(this,t),a.__calling=!1)}}function get(e){return e?this._state[e]:this._state}function init(e,t){e._handlers=blankObject(),e._bind=t._bind,e.options=t,e.root=t.root||e,e.store=e.root.store||t.store}function observe(e,t,n){var r=t.bind(this);return n&&!1===n.init||r(this.get()[e],void 0),this.on(n&&n.defer?"update":"state",function(t){t.changed[e]&&r(t.current[e],t.previous&&t.previous[e])})}function on(e,t){if("teardown"===e)return this.on("destroy",t);var n=this._handlers[e]||(this._handlers[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}}function set(e){this._set(assign({},e)),this.root._lock||(this.root._lock=!0,callAll(this.root._beforecreate),callAll(this.root._oncreate),callAll(this.root._aftercreate),this.root._lock=!1)}function _set(e){var t=this._state,n={},r=!1;for(var a in e)this._differs(e[a],t[a])&&(n[a]=r=!0);r&&(this._state=assign(assign({},t),e),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:t}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:t})))}function callAll(e){for(;e&&e.length;)e.shift()()}function _mount(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)}function _unmount(){this._fragment&&this._fragment.u()}function removeFromStore(){this.store._remove(this)}jschardet=jschardet&&jschardet.hasOwnProperty("default")?jschardet.default:jschardet;var proto={destroy:destroy,get:get,fire:fire,observe:observe,on:on,set:set,teardown:destroy,_recompute:noop,_set:_set,_mount:_mount,_unmount:_unmount,_differs:_differs};function _isObject(e){var t=typeof e;return"function"===t||"object"===t&&!!e}var ArrayProto=Array.prototype,ObjProto=Object.prototype,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys;function _has(e,t){return null!=e&&hasOwnProperty.call(e,t)}function _keys(e){if(!_isObject(e))return[];if(nativeKeys)return nativeKeys(e);var t=[];for(var n in e)_has(e,n)&&t.push(n);return hasEnumBug&&collectNonEnumProps(e,t),t}function _each(e,t,n){var r,a;if(t=optimizeCb(t,n),isArrayLike(e))for(r=0,a=e.length;r<a;r++)t(e[r],r,e);else{var i=_keys(e);for(r=0,a=i.length;r<a;r++)t(e[i[r]],i[r],e)}return e}function _sortedIndex(e,t,n,r){for(var a=(n=cb(n,r,1))(t),i=0,o=getLength(e);i<o;){var s=Math.floor((i+o)/2);n(e[s])<a?i=s+1:o=s}return i}var _indexOf=createIndexFinder(1,_findIndex,_sortedIndex);function _values(e){for(var t=_keys(e),n=t.length,r=Array(n),a=0;a<n;a++)r[a]=e[t[a]];return r}function _contains(e,t,n,r){return isArrayLike(e)||(e=_values(e)),("number"!=typeof n||r)&&(n=0),_indexOf(e,t,n)>=0}var _isArray=nativeIsArray||function(e){return"[object Array]"===toString.call(e)};function customFunction(){return"function"!=typeof/./&&"object"!=typeof Int8Array&&"undefined"!=typeof document&&"function"!=typeof document.childNodes?function(e){return"function"==typeof e||!1}:null}var _isFunction=customFunction()||function(e){return"[object Function]"===toString.call(e)};function customArguments(){return"[object Arguments]"===toString.call(arguments)?null:function(e){return _has(e,"callee")}}var _isArguments=customArguments()||function(e){return"[object Arguments]"===toString.call(e)};function _isNumber(e){return"[object Number]"===toString.call(e)}function _isNaN(e){return _isNumber(e)&&isNaN(e)}function _invert(e){for(var t={},n=_keys(e),r=0,a=n.length;r<a;r++)t[e[n[r]]]=n[r];return t}var _iteratee=builtinIteratee;function _identity(e){return e}var _extendOwn=createAssigner(_keys);function _isMatch(e,t){var n=_keys(t),r=n.length;if(null==e)return!r;for(var a=Object(e),i=0;i<r;i++){var o=n[i];if(t[o]!==a[o]||!(o in a))return!1}return!0}function _matcher(e){return e=_extendOwn({},e),function(t){return _isMatch(t,e)}}function optimizeCb(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,a){return e.call(t,n,r,a)};case 4:return function(n,r,a,i){return e.call(t,n,r,a,i)}}return function(){return e.apply(t,arguments)}}function builtinIteratee(e,t){return cb(e,t,1/0)}function cb(e,t,n){return _iteratee!==builtinIteratee?_iteratee(e,t):null==e?_identity:_isFunction(e)?optimizeCb(e,t,n):_isObject(e)?_matcher(e):property(e)}function restArgs(e,t){return t=null==t?e.length-1:+t,function(){for(var n=arguments,r=Math.max(arguments.length-t,0),a=Array(r),i=0;i<r;i++)a[i]=n[i+t];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,arguments[0],a);case 2:return e.call(this,arguments[0],arguments[1],a)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=n[i];return o[t]=a,e.apply(this,o)}}function property(e){return function(t){return null==t?void 0:t[e]}}var MAX_ARRAY_INDEX=Math.pow(2,53)-1,getLength=property("length"),isArrayLike=function(e){var t=getLength(e);return"number"==typeof t&&t>=0&&t<=MAX_ARRAY_INDEX};function flatten(e,t,n,r){for(var a=(r=r||[]).length,i=0,o=getLength(e);i<o;i++){var s=e[i];if(isArrayLike(s)&&(_isArray(s)||_isArguments(s)))if(t)for(var c=0,l=s.length;c<l;)r[a++]=s[c++];else flatten(s,t,n,r),a=r.length;else n||(r[a++]=s)}return r}function createPredicateIndexFinder(e){return function(t,n,r){n=cb(n,r);for(var a=getLength(t),i=e>0?0:a-1;i>=0&&i<a;i+=e)if(n(t[i],i,t))return i;return-1}}function createIndexFinder(e,t,n){return function(r,a,i){var o=0,s=getLength(r);if("number"==typeof i)e>0?o=i>=0?i:Math.max(i+s,o):s=i>=0?Math.min(i+1,s):i+s+1;else if(n&&i&&s)return r[i=n(r,a)]===a?i:-1;if(a!=a)return(i=t(slice.call(r,o,s),_isNaN))>=0?i+o:-1;for(i=e>0?o:s-1;i>=0&&i<s;i+=e)if(r[i]===a)return i;return-1}}var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(e,t){var n=nonEnumerableProps.length,r=e.constructor,a=_isFunction(r)&&r.prototype||ObjProto,i="constructor";for(_has(e,i)&&!_contains(t,i)&&t.push(i);n--;)(i=nonEnumerableProps[n])in e&&e[i]!==a[i]&&!_contains(t,i)&&t.push(i)}function createAssigner(e,t){return function(n){var r=arguments,a=arguments.length;if(t&&(n=Object(n)),a<2||null==n)return n;for(var i=1;i<a;i++)for(var o=r[i],s=e(o),c=s.length,l=0;l<c;l++){var d=s[l];!_isObject(n)||t&&void 0!==n[d]||(n[d]=o[d])}return n}}var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unescapeMap=_invert(escapeMap),_findIndex=createPredicateIndexFinder(1);function _findKey(e,t,n){t=cb(t,n);for(var r,a=_keys(e),i=0,o=a.length;i<o;i++)if(t(e[r=a[i]],r,e))return r}function _find(e,t,n){var r=(isArrayLike(e)?_findIndex:_findKey)(e,t,n);if(void 0!==r&&-1!==r)return e[r]}function _findWhere(e,t){return _find(e,_matcher(t))}function active_i(e){var t=e.active,n=e.steps;return n.indexOf(_findWhere(n,{id:t}))}function passed(e){var t=e.index,n=e.active_i;return t<e.maxStep&&t!==n}function class_(e){var t=e.step,n=e.index,r=e.active,a=e.passed,i=e.$lastEditStep,o=[];return t.readonly&&o.push("readonly"),r===t.id?o.push("active"):(n>i+1&&o.push("unseen"),a&&o.push("passed")),o.join(" ")}function data$1(){return{step:{title:"",index:1},maxStep:1,active:1}}var methods={select:function(e,t){if(!t.redirect&&(e.preventDefault(),!t.readonly&&(this.fire("select",t),"/edit/"===location.pathname.substr(0,6)))){var n=this.store.get().id;window.history.pushState({step:t,id:n},"","/edit/"+n+"/"+t.id)}}},previousPageUrl;function onupdate(e){var t=e.changed,n=e.current;if(t.active_i){var r=n.steps[n.active_i];if(r){var a=this.store.get(),i=a.id,o=a.title;window.document.title=o+" - "+i+" - "+r.title+" | Datawrapper"}}}function create_main_fragment(e,t){var n,r,a,i,o,s,c,l,d,u=t.step.title,p=t.passed&&create_if_block(e,t);function h(t){var n=e.get();e.select(t,n.step)}return{c:function(){n=createElement("a"),r=createElement("span"),a=createText(t.index),i=createText("\n    "),o=createElement("span"),s=createText("\n    "),p&&p.c(),c=createText("\n    "),l=createElement("div"),this.h()},h:function(){r.className="step",o.className="title",l.className="corner",addListener(n,"click",h),setStyle(n,"width",95/t.steps.length+"%"),n.href=d=t.step.redirect?t.step.redirect:"#"+t.step.id,n.className=t.class_},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,r),appendNode(i,n),appendNode(o,n),o.innerHTML=u,appendNode(s,n),p&&p.m(n,null),appendNode(c,n),appendNode(l,n)},p:function(t,r){t.index&&(a.data=r.index),t.step&&u!==(u=r.step.title)&&(o.innerHTML=u),r.passed?p||((p=create_if_block(e,r)).c(),p.m(n,c)):p&&(p.u(),p.d(),p=null),t.steps&&setStyle(n,"width",95/r.steps.length+"%"),t.step&&d!==(d=r.step.redirect?r.step.redirect:"#"+r.step.id)&&(n.href=d),t.class_&&(n.className=r.class_)},u:function(){o.innerHTML="",detachNode(n),p&&p.u()},d:function(){p&&p.d(),removeListener(n,"click",h)}}}function create_if_block(e,t){var n;return{c:function(){n=createElement("i"),this.h()},h:function(){n.className="fa fa-check"},m:function(e,t){insertNode(n,e,t)},u:function(){detachNode(n)},d:noop}}function EditorNavStep(e){init(this,e),this._state=assign(assign(this.store._init(["lastEditStep"]),data$1()),e.data),this.store._add(this,["lastEditStep"]),this._recompute({active:1,steps:1,index:1,active_i:1,maxStep:1,step:1,passed:1,$lastEditStep:1},this._state),this._handlers.update=[onupdate],this._handlers.destroy=[removeFromStore];var t=this;e.root||(this._oncreate=[]),this._fragment=create_main_fragment(this,this._state),this.root._oncreate.push(function(){t.fire("update",{changed:{active:1,steps:1,index:1,active_i:1,maxStep:1,step:1,passed:1,$lastEditStep:1,class_:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._oncreate))}function trackEvent(e,t,n,r){window._paq&&window._paq.push(["trackEvent",e,t,n,r])}function trackPageView(e){void 0===e&&(e=0),window._paq&&(previousPageUrl&&window._paq.push(["setReferrerUrl",previousPageUrl]),window._paq.push(["setGenerationTimeMs",e]),window._paq.push(["setCustomUrl",window.location.pathname]),window._paq.push(["setDocumentTitle",window.document.title]),window._paq.push(["trackPageView"]),previousPageUrl=window.location.pathname)}function data$2(){return{steps:[]}}assign(EditorNavStep.prototype,proto),assign(EditorNavStep.prototype,methods),EditorNavStep.prototype._recompute=function(e,t){(e.active||e.steps)&&this._differs(t.active_i,t.active_i=active_i(t))&&(e.active_i=!0),(e.index||e.active_i||e.maxStep)&&this._differs(t.passed,t.passed=passed(t))&&(e.passed=!0),(e.step||e.index||e.active||e.passed||e.$lastEditStep)&&this._differs(t.class_,t.class_=class_(t))&&(e.class_=!0)};var methods$1={select:function(e,t){if(this.set({active:e.id}),void 0===t){var n=this.get().steps;t=n.indexOf(_findWhere(n,{id:e.id}))}var r=this.store.get().lastEditStep;window.history.pushState({id:this.store.get().id,step:e},null,e.id),this.store.set({lastEditStep:Math.max(r,t+1)}),trackPageView()},popstate:function(e){if(e.state&&e.state.id&&e.state.step){var t=e.state,n=t.id,r=t.step;n===this.store.get().id?(this.set({active:r.id}),trackPageView()):window.location.href="/edit/"+n+"/"+r.id}}},app;function oncreate(){var e=this,t=this.get(),n=t.active,r=t.steps,a=this.store.get(),i=a.lastEditStep,o=a.id,s=_findWhere(r,{id:n});this.store.set({lastEditStep:Math.max(i,r.indexOf(s)+1)}),this.store.on("navigate",function(t){e.select({id:t})}),window.history.replaceState({step:s,id:o},s.title)}function create_main_fragment$1(e,t){var n,r,a;function i(t){e.popstate(t)}window.addEventListener("popstate",i);for(var o=t.steps,s=[],c=0;c<o.length;c+=1)s[c]=create_each_block(e,assign(assign({},t),{each_value:o,step:o[c],i:c}));var l=t.$user.id!=t.$authorId&&t.$user.isAdmin&&create_if_block$1(e,t);return{c:function(){n=createElement("div");for(var e=0;e<s.length;e+=1)s[e].c();r=createText("\n\n"),l&&l.c(),a=createComment(),this.h()},h:function(){n.className="create-nav svelte-nols97"},m:function(e,t){insertNode(n,e,t);for(var i=0;i<s.length;i+=1)s[i].m(n,null);insertNode(r,e,t),l&&l.m(e,t),insertNode(a,e,t)},p:function(t,r){var i=r.steps;if(t.steps||t.active){for(var o=0;o<i.length;o+=1){var c=assign(assign({},r),{each_value:i,step:i[o],i:o});s[o]?s[o].p(t,c):(s[o]=create_each_block(e,c),s[o].c(),s[o].m(n,null))}for(;o<s.length;o+=1)s[o].u(),s[o].d();s.length=i.length}r.$user.id!=r.$authorId&&r.$user.isAdmin?l?l.p(t,r):((l=create_if_block$1(e,r)).c(),l.m(a.parentNode,a)):l&&(l.u(),l.d(),l=null)},u:function(){detachNode(n);for(var e=0;e<s.length;e+=1)s[e].u();detachNode(r),l&&l.u(),detachNode(a)},d:function(){window.removeEventListener("popstate",i),destroyEach(s),l&&l.d()}}}function create_each_block(e,t){var n=t.step,r=t.each_value,a=t.i,i={},o={index:a+1};a in t.each_value&&(o.step=n,i.step=!0),"steps"in t&&(o.steps=t.steps,i.steps=!0),"active"in t&&(o.active=t.active,i.active=!0);var s=new EditorNavStep({root:e.root,data:o,_bind:function(t,n){var o=e.get(),s={};!i.step&&t.step&&(r[a]=n.step,s.steps=o.steps),!i.steps&&t.steps&&(s.steps=n.steps),!i.active&&t.active&&(s.active=n.active),e._set(s),i={}}});return e.root._beforecreate.push(function(){s._bind({step:1,steps:1,active:1},s.get())}),s.on("select",function(t){e.select(n,a)}),{c:function(){s._fragment.c()},m:function(e,t){s._mount(e,t)},p:function(e,t){n=t.step,r=t.each_value,a=t.i;var o={};o.index=a+1,!i.step&&e.steps&&(o.step=n,i.step=!0),!i.steps&&e.steps&&(o.steps=t.steps,i.steps=!0),!i.active&&e.active&&(o.active=t.active,i.active=!0),s._set(o),i={}},u:function(){s._unmount()},d:function(){s.destroy(!1)}}}function create_if_block$1(e,t){var n,r,a,i,o,s,c;return{c:function(){n=createElement("div"),r=createText("This chart belongs to "),a=createElement("a"),i=createText("User "),o=createText(t.$authorId),c=createText(". Great power comes with great responsibility, so be careful with what you're doing!"),this.h()},h:function(){a.target="_blank",a.href=s="/admin/chart/by/"+t.$authorId,n.className="alert alert-warning",setStyle(n,"text-align","center"),setStyle(n,"margin-top","10px")},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(i,a),appendNode(o,a),appendNode(c,n)},p:function(e,t){e.$authorId&&(o.data=t.$authorId),e.$authorId&&s!==(s="/admin/chart/by/"+t.$authorId)&&(a.href=s)},u:function(){detachNode(n)},d:noop}}function EditorNav(e){init(this,e),this._state=assign(assign(this.store._init(["user","authorId"]),data$2()),e.data),this.store._add(this,["user","authorId"]),this._handlers.destroy=[removeFromStore];var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$1(this,this._state),this.root._oncreate.push(function(){oncreate.call(t),t.fire("update",{changed:{steps:1,active:1,$user:1,$authorId:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function __(e,t){var n=arguments;if(void 0===t&&(t="core"),e=e.trim(),!dw.backend.__messages[t])return"MISSING:"+e;var r=dw.backend.__messages[t][e]||dw.backend.__messages.core[e]||e;if(arguments.length>2)for(var a=2;a<arguments.length;a++){var i=a-1;r=r.replace("$"+i,n[a])}return r}function data$3(){return{placeholder:__("upload / paste here")}}function create_main_fragment$2(e,t){var n,r,a,i=!1;function o(){i=!0,e.store.set({_rawData:a.value}),i=!1}return{c:function(){n=createElement("form"),r=createElement("div"),a=createElement("textarea"),this.h()},h:function(){addListener(a,"input",o),a.readOnly=t.readonly,a.id="upload-data-text",setStyle(a,"resize","none"),a.placeholder=t.placeholder,a.className="svelte-h5ftni",r.className="control-group",n.className="upload-form"},m:function(e,i){insertNode(n,e,i),appendNode(r,n),appendNode(a,r),a.value=t.$_rawData},p:function(e,t){i||(a.value=t.$_rawData),e.readonly&&(a.readOnly=t.readonly),e.placeholder&&(a.placeholder=t.placeholder)},u:function(){detachNode(n)},d:function(){removeListener(a,"input",o)}}}function TextAreaUpload(e){init(this,e),this._state=assign(assign(this.store._init(["_rawData"]),data$3()),e.data),this.store._add(this,["_rawData"]),this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment$2(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function datasetsArray(e){var t=e.datasets;return Object.keys(t).map(function(e){return t[e]})}function data$4(){return{selectedDataset:"--"}}function onupdate$1(e){var t=e.changed,n=e.current;if(t.selectedDataset&&"--"!==n.selectedDataset){var r=n.selectedDataset;this.set({chartData:r.data}),r.presets&&Object.keys(r.presets).forEach(function(e){dw.backend.currentChart.set(e,r.presets[e])})}}function create_main_fragment$3(e,t){for(var n,r,a,i,o,s,c,l,d,u,p=__("upload / quick help"),h=__("upload / try a dataset"),f=__("upload / sample dataset"),_=!1,m=t.datasetsArray,v=[],g=0;g<m.length;g+=1)v[g]=create_each_block$1(e,assign(assign({},t),{each_value:m,group:m[g],group_index:g}));function b(){_=!0,e.set({selectedDataset:selectValue(l)}),_=!1}return{c:function(){n=createElement("p"),r=createText(p),a=createText("\n\n"),i=createElement("div"),o=createElement("p"),s=createText(h),c=createText("\n    "),l=createElement("select"),d=createElement("option"),u=createText(f);for(var e=0;e<v.length;e+=1)v[e].c();this.h()},h:function(){d.__value="--",d.value=d.__value,addListener(l,"change",b),"selectedDataset"in t||e.root._beforecreate.push(b),l.disabled=t.readonly,l.id="demo-datasets",l.className="svelte-1jdst2k",i.className="demo-datasets"},m:function(e,p){insertNode(n,e,p),appendNode(r,n),insertNode(a,e,p),insertNode(i,e,p),appendNode(o,i),appendNode(s,o),appendNode(c,i),appendNode(l,i),appendNode(d,l),appendNode(u,d);for(var h=0;h<v.length;h+=1)v[h].m(l,null);selectOption(l,t.selectedDataset)},p:function(t,n){var r=n.datasetsArray;if(t.datasetsArray){for(var a=0;a<r.length;a+=1){var i=assign(assign({},n),{each_value:r,group:r[a],group_index:a});v[a]?v[a].p(t,i):(v[a]=create_each_block$1(e,i),v[a].c(),v[a].m(l,null))}for(;a<v.length;a+=1)v[a].u(),v[a].d();v.length=r.length}_||selectOption(l,n.selectedDataset),t.readonly&&(l.disabled=n.readonly)},u:function(){detachNode(n),detachNode(a),detachNode(i);for(var e=0;e<v.length;e+=1)v[e].u()},d:function(){destroyEach(v),removeListener(l,"change",b)}}}function create_each_block$1(e,t){for(var n,r,a=t.group,i=(t.each_value,t.group_index,a.datasets),o=[],s=0;s<i.length;s+=1)o[s]=create_each_block_1(e,assign(assign({},t),{each_value_1:i,dataset:i[s],dataset_index:s}));return{c:function(){n=createElement("optgroup");for(var e=0;e<o.length;e+=1)o[e].c();this.h()},h:function(){setAttribute(n,"label",r=a.type)},m:function(e,t){insertNode(n,e,t);for(var r=0;r<o.length;r+=1)o[r].m(n,null)},p:function(t,i){a=i.group,i.each_value,i.group_index;var s=a.datasets;if(t.datasetsArray){for(var c=0;c<s.length;c+=1){var l=assign(assign({},i),{each_value_1:s,dataset:s[c],dataset_index:c});o[c]?o[c].p(t,l):(o[c]=create_each_block_1(e,l),o[c].c(),o[c].m(n,null))}for(;c<o.length;c+=1)o[c].u(),o[c].d();o.length=s.length}t.datasetsArray&&r!==(r=a.type)&&setAttribute(n,"label",r)},u:function(){detachNode(n);for(var e=0;e<o.length;e+=1)o[e].u()},d:function(){destroyEach(o)}}}function create_each_block_1(e,t){t.group,t.each_value,t.group_index;var n,r,a,i=t.dataset,o=(t.each_value_1,t.dataset_index,i.title);return{c:function(){n=createElement("option"),r=createText(o),this.h()},h:function(){n.__value=a=i,n.value=n.__value,n.className="demo-dataset"},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:function(e,t){t.group,t.each_value,t.group_index,i=t.dataset,t.each_value_1,t.dataset_index,e.datasetsArray&&o!==(o=i.title)&&(r.data=o),e.datasetsArray&&a!==(a=i)&&(n.__value=a),n.value=n.__value},u:function(){detachNode(n)},d:noop}}function UploadHelp(e){init(this,e),this._state=assign(data$4(),e.data),this._recompute({datasets:1},this._state),this._handlers.update=[onupdate$1];var t=this;e.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=create_main_fragment$3(this,this._state),this.root._oncreate.push(function(){t.fire("update",{changed:{datasets:1,readonly:1,selectedDataset:1,datasetsArray:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._beforecreate),callAll(this._oncreate))}function fetchJSON(e,t,n,r,a){var i={method:t,body:r,mode:"cors",credentials:n};window.fetch(e,i).then(function(e){return 200!=e.status?new Error(e.statusText):e.text()}).then(function(e){try{return JSON.parse(e)}catch(t){return console.warn("malformed json input",e),e}}).then(a).catch(function(e){console.error(e)})}function getJSON(e,t,n){return 2==arguments.length&&(n=t,t="include"),fetchJSON(e,"GET",t,null,n)}function postJSON(e,t,n){return fetchJSON(e,"POST","include",t,n)}function putJSON(e,t,n){return fetchJSON(e,"PUT","include",t,n)}function loadScript(e,t){var n=document.createElement("script");n.src=e,n.onload=function(){console.log("script",e,"loaded"),t&&t()},document.body.appendChild(n)}function loadStylesheet(e,t){var n=document.createElement("link");n.rel="stylesheet",n.href=e,n.onload=function(){console.log("style",e,"loaded"),t&&t()},document.head.appendChild(n)}function data$5(){return{selected:!1,sheets:[]}}function onupdate$2(e){var t=this,n=e.changed,r=e.current;n.sheets&&r.sheets.length>1?setTimeout(function(){t.set({selected:r.sheets[0]})},300):n.sheets&&1===r.sheets.length&&putJSON("/api/charts/"+dw.backend.currentChart.get("id")+"/data",r.sheets[0].csv,function(){window.location.href="describe"}),n.selected&&this.set({chartData:r.selected.csv})}function create_main_fragment$4(e,t){var n;function r(e){return e.sheets.length?e.sheets.length>1?create_if_block_1:create_if_block_2:create_if_block$2}var a=r(t),i=a(e,t);return{c:function(){n=createElement("div"),i.c()},m:function(e,t){insertNode(n,e,t),i.m(n,null)},p:function(t,o){a===(a=r(o))&&i?i.p(t,o):(i.u(),i.d(),(i=a(e,o)).c(),i.m(n,null))},u:function(){detachNode(n),i.u()},d:function(){i.d()}}}function create_each_block$2(e,t){var n,r,a,i=t.sheet,o=(t.each_value,t.sheet_index,i.name);return{c:function(){n=createElement("option"),r=createText(o),this.h()},h:function(){n.__value=a=i,n.value=n.__value},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:function(e,t){i=t.sheet,t.each_value,t.sheet_index,e.sheets&&o!==(o=i.name)&&(r.data=o),e.sheets&&a!==(a=i)&&(n.__value=a),n.value=n.__value},u:function(){detachNode(n)},d:noop}}function create_if_block$2(e,t){var n,r=__("upload / parsing-xls");return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="alert alert-info"},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},p:noop,u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_1(e,t){for(var n,r,a,i,o,s=__("upload / select sheet"),c=!1,l=t.sheets,d=[],u=0;u<l.length;u+=1)d[u]=create_each_block$2(e,assign(assign({},t),{each_value:l,sheet:l[u],sheet_index:u}));function p(){c=!0,e.set({selected:selectValue(i)}),c=!1}return{c:function(){n=createElement("p"),r=createText(s),a=createText("\n    "),i=createElement("select");for(var e=0;e<d.length;e+=1)d[e].c();this.h()},h:function(){addListener(i,"change",p),"selected"in t||e.root._beforecreate.push(p),i.disabled=o=!t.sheets.length,i.className="svelte-1jdst2k"},m:function(e,o){insertNode(n,e,o),appendNode(r,n),insertNode(a,e,o),insertNode(i,e,o);for(var s=0;s<d.length;s+=1)d[s].m(i,null);selectOption(i,t.selected)},p:function(t,n){var r=n.sheets;if(t.sheets){for(var a=0;a<r.length;a+=1){var s=assign(assign({},n),{each_value:r,sheet:r[a],sheet_index:a});d[a]?d[a].p(t,s):(d[a]=create_each_block$2(e,s),d[a].c(),d[a].m(i,null))}for(;a<d.length;a+=1)d[a].u(),d[a].d();d.length=r.length}c||selectOption(i,n.selected),t.sheets&&o!==(o=!n.sheets.length)&&(i.disabled=o)},u:function(){detachNode(n),detachNode(a),detachNode(i);for(var e=0;e<d.length;e+=1)d[e].u()},d:function(){destroyEach(d),removeListener(i,"change",p)}}}function create_if_block_2(e,t){var n,r=__("upload / xls / uploading data");return{c:function(){n=createElement("p")},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},p:noop,u:function(){n.innerHTML="",detachNode(n)},d:noop}}function SelectSheet(e){init(this,e),this._state=assign(data$5(),e.data),this._handlers.update=[onupdate$2];var t=this;e.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=create_main_fragment$4(this,this._state),this.root._oncreate.push(function(){t.fire("update",{changed:{sheets:1,selected:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._beforecreate),callAll(this._oncreate))}function readFile(e,t){var n=new FileReader;n.onload=function(){try{for(var r=new Uint8Array(n.result),a="",i=0,o=0;o<r.length;++o)r[o]>122&&i++,a+=String.fromCharCode(r[o]);var s=jschardet.detect(a);s.confidence<=.95&&i<10&&(s.encoding="utf-8"),(n=new FileReader).onload=function(){return t(null,n.result)},n.readAsText(e,s.encoding)}catch(e){console.warn(e),t(null,n.result)}},n.readAsArrayBuffer(e)}function readSpreadsheet(e,t){var n="undefined"!=typeof FileReader&&(FileReader.prototype||{}).readAsBinaryString,r=new FileReader;r.onload=function(){try{var e=n?r.result:new Uint8Array(r.result),a=XLSX.read(e,{type:n?"binary":"array"});t(null,a.SheetNames.map(function(e){return{name:e,sheet:a.Sheets[e],csv:XLSX.utils.sheet_to_csv(a.Sheets[e])}}))}catch(e){console.error(e),t(null,r.result)}},r.readAsBinaryString(e)}assign(EditorNav.prototype,proto),assign(EditorNav.prototype,methods$1),assign(TextAreaUpload.prototype,proto),assign(UploadHelp.prototype,proto),UploadHelp.prototype._recompute=function(e,t){e.datasets&&this._differs(t.datasetsArray,t.datasetsArray=datasetsArray(t))&&(e.datasetsArray=!0)},assign(SelectSheet.prototype,proto);var coreUploads=[{id:"copy",title:__("upload / copy-paste"),longTitle:__("upload / copy-paste / long"),icon:"fa fa-clipboard",mainPanel:TextAreaUpload,sidebar:UploadHelp,action:function(){}},{id:"upload",title:__("upload / upload-csv"),longTitle:__("upload / upload-csv / long"),icon:"fa-file-excel-o fa",mainPanel:TextAreaUpload,sidebar:UploadHelp,isFileUpload:!0,onFileUpload:function(e){var t=e.target.files[0];"text/"===t.type.substr(0,5)||".csv"===t.name.substr(t.name.length-4)?(app.set({Sidebar:UploadHelp}),readFile(t,function(e,t){putJSON("/api/charts/"+dw.backend.currentChart.get("id")+"/data",t,function(){window.location.href="describe"})})):"application/"===t.type.substr(0,12)?(app.set({Sidebar:SelectSheet,sheets:[]}),readSpreadsheet(t,function(e,t){if(e)return app.set({error:e});app.set({sheets:t})})):app.set({error:__("upload / csv-required")})},action:function(){}}];function data$6(){return{dragover:!1,MainPanel:TextAreaUpload,Sidebar:UploadHelp,active:coreUploads[0],buttons:coreUploads,sheets:[],chart:{id:""},readonly:!1,chartData:"",transpose:!1,firstRowIsHeader:!0,skipRows:0}}var methods$2={addButton:function(e){coreUploads.push(e),this.set({buttons:coreUploads});var t=this.get().defaultMethod;e.id===t&&this.btnAction(e)},btnAction:function(e){var t=this.store;this.set({active:e}),"copy"===e.id&&t.get("externalData")&&t.set({externalData:""});var n=e.id;"upload"===e.id&&(n="copy",setTimeout(function(){},1e3)),t.setMetadata("data.upload-method",n),e.action&&e.action(),e.mainPanel&&this.set({MainPanel:e.mainPanel}),e.sidebar&&this.set({Sidebar:e.sidebar})},btnUpload:function(e,t){e.onFileUpload&&e.onFileUpload(t)},dragStart:function(e){"copy"===this.get().active.id&&(e.preventDefault(),this.set({dragover:!0}))},resetDrag:function(){this.set({dragover:!1})},onFileDrop:function(e){if("copy"===this.get().active.id){this.resetDrag(),e.preventDefault();var t=[];if(e.dataTransfer.items){for(var n=0;n<e.dataTransfer.items.length;n++)"file"===e.dataTransfer.items[n].kind&&t.push(e.dataTransfer.items[n].getAsFile());e.dataTransfer.items.clear()}else{for(var r=0;r<e.dataTransfer.files.length;r++)t.push(e.dataTransfer.files[r]);e.dataTransfer.items.clear()}for(var a=this.store,i=0;i<t.length;i++)if("text/"===t[i].type.substr(0,5))return readFile(t[i],function(e,t){a.set({_rawData:t}),a.storeData(function(){setTimeout(function(){a.fire("navigate","describe")},500)})})}}};function oncreate$1(){var e=this;app=this;var t=this.store.getMetadata("data.upload-method","copy");this.set({defaultMethod:t}),coreUploads.forEach(function(n){n.id===t&&e.set({active:n})})}function create_main_fragment$5(e,t){for(var n,r,a,i,o,s,c,l,d,u,p,h,f,_,m,v,g,b,N,y,x,w,k=__("upload / title"),E=t.active.longTitle||t.active.title,M={},T={},Y=__("Proceed"),S=t.dragover&&create_if_block$3(e,t),$=t.buttons,A=[],D=0;D<$.length;D+=1)A[D]=create_each_block$3(e,assign(assign({},t),{each_value:$,btn:$[D],btn_index:D}));var C=t.error&&create_if_block_2$1(e,t),L=t.Sidebar;function H(t){var n={};return"chartData"in t&&(n.chartData=t.chartData,M.chartData=!0),"readonly"in t&&(n.readonly=t.readonly,M.readonly=!0),"sheets"in t&&(n.sheets=t.sheets,M.sheets=!0),"datasets"in t&&(n.datasets=t.datasets,M.datasets=!0),{root:e.root,data:n,_bind:function(t,n){e.get();var r={};!M.chartData&&t.chartData&&(r.chartData=n.chartData),!M.readonly&&t.readonly&&(r.readonly=n.readonly),!M.sheets&&t.sheets&&(r.sheets=n.sheets),!M.datasets&&t.datasets&&(r.datasets=n.datasets),e._set(r),M={}}}}if(L){var B=new L(H(t));e.root._beforecreate.push(function(){B._bind({chartData:1,readonly:1,sheets:1,datasets:1},B.get())})}var j=t.MainPanel;function P(t){var n={};return"chartData"in t&&(n.chartData=t.chartData,T.chartData=!0),"readonly"in t&&(n.readonly=t.readonly,T.readonly=!0),{root:e.root,data:n,_bind:function(t,n){e.get();var r={};!T.chartData&&t.chartData&&(r.chartData=n.chartData),!T.readonly&&t.readonly&&(r.readonly=n.readonly),e._set(r),T={}}}}if(j){var O=new j(P(t));e.root._beforecreate.push(function(){O._bind({chartData:1,readonly:1},O.get())})}function z(t){e.onFileDrop(t)}function U(t){e.dragStart(t)}function I(t){e.dragStart(t)}function F(t){e.resetDrag()}function R(t){e.resetDrag()}return{c:function(){n=createElement("div"),S&&S.c(),r=createText("\n    "),a=createElement("div"),i=createElement("div"),o=createElement("div"),s=createElement("h3"),c=createText("\n\n                "),l=createElement("ul");for(var e=0;e<A.length;e+=1)A[e].c();d=createText("\n\n                "),C&&C.c(),u=createText("\n\n                "),p=createElement("h4"),h=createText(E),f=createText("\n\n                "),B&&B._fragment.c(),_=createText("\n        "),m=createElement("div"),O&&O._fragment.c(),v=createText("\n\n            "),g=createElement("div"),b=createElement("a"),N=createText(Y),y=createText(" "),x=createElement("i"),this.h()},h:function(){l.className="import-methods svelte-oe6wy4",o.className="sidebar",i.className="span5",x.className="icon-chevron-right icon-white",b.href="describe",b.className="submit btn btn-primary",b.id="describe-proceed",g.className="buttons pull-right",m.className="span7",a.className="row",a.style.cssText=w=t.dragover?"opacity: 0.5;filter:blur(6px);background:white;pointer-events:none":"",addListener(n,"drop",z),addListener(n,"dragover",U),addListener(n,"dragenter",I),addListener(n,"dragend",F),addListener(n,"dragleave",R),n.className="chart-editor dw-create-upload upload-data"},m:function(e,t){insertNode(n,e,t),S&&S.m(n,null),appendNode(r,n),appendNode(a,n),appendNode(i,a),appendNode(o,i),appendNode(s,o),s.innerHTML=k,appendNode(c,o),appendNode(l,o);for(var w=0;w<A.length;w+=1)A[w].m(l,null);appendNode(d,o),C&&C.m(o,null),appendNode(u,o),appendNode(p,o),appendNode(h,p),appendNode(f,o),B&&B._mount(o,null),appendNode(_,a),appendNode(m,a),O&&O._mount(m,null),appendNode(v,m),appendNode(g,m),appendNode(b,g),appendNode(N,b),appendNode(y,b),appendNode(x,b)},p:function(t,i){i.dragover?S||((S=create_if_block$3(e,i)).c(),S.m(n,r)):S&&(S.u(),S.d(),S=null);var s=i.buttons;if(t.buttons||t.active){for(var c=0;c<s.length;c+=1){var d=assign(assign({},i),{each_value:s,btn:s[c],btn_index:c});A[c]?A[c].p(t,d):(A[c]=create_each_block$3(e,d),A[c].c(),A[c].m(l,null))}for(;c<A.length;c+=1)A[c].u(),A[c].d();A.length=s.length}if(i.error?C?C.p(t,i):((C=create_if_block_2$1(e,i)).c(),C.m(o,u)):C&&(C.u(),C.d(),C=null),t.active&&E!==(E=i.active.longTitle||i.active.title)&&(h.data=E),L!==(L=i.Sidebar))B&&B.destroy(),L&&((B=new L(H(i)))._fragment.c(),B._mount(o,null));else{var p={};!M.chartData&&t.chartData&&(p.chartData=i.chartData,M.chartData=!0),!M.readonly&&t.readonly&&(p.readonly=i.readonly,M.readonly=!0),!M.sheets&&t.sheets&&(p.sheets=i.sheets,M.sheets=!0),!M.datasets&&t.datasets&&(p.datasets=i.datasets,M.datasets=!0),B._set(p),M={}}if(j!==(j=i.MainPanel))O&&O.destroy(),j&&((O=new j(P(i)))._fragment.c(),O._mount(m,v));else{var f={};!T.chartData&&t.chartData&&(f.chartData=i.chartData,T.chartData=!0),!T.readonly&&t.readonly&&(f.readonly=i.readonly,T.readonly=!0),O._set(f),T={}}t.dragover&&w!==(w=i.dragover?"opacity: 0.5;filter:blur(6px);background:white;pointer-events:none":"")&&(a.style.cssText=w)},u:function(){s.innerHTML="",detachNode(n),S&&S.u();for(var e=0;e<A.length;e+=1)A[e].u();C&&C.u()},d:function(){S&&S.d(),destroyEach(A),C&&C.d(),B&&B.destroy(!1),O&&O.destroy(!1),removeListener(n,"drop",z),removeListener(n,"dragover",U),removeListener(n,"dragenter",I),removeListener(n,"dragend",F),removeListener(n,"dragleave",R)}}}function create_if_block$3(e,t){var n,r=__("upload / drag-csv-here");return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="draginfo svelte-oe6wy4"},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_each_block$3(e,t){var n,r,a,i,o,s,c,l,d,u=t.btn,p=(t.each_value,t.btn_index,u.title),h=u.isFileUpload&&create_if_block_1$1(e,t);return{c:function(){n=createElement("li"),r=createElement("label"),h&&h.c(),a=createText("\n                            "),i=createElement("i"),s=createText("\n                            "),c=createElement("span"),l=createText(p),this.h()},h:function(){i.className=o=u.icon+" svelte-oe6wy4",c.className="svelte-oe6wy4",r.className="svelte-oe6wy4",addListener(n,"click",click_handler),n.className=d="action "+(t.active==u?"active":"")+" svelte-oe6wy4",n._svelte={component:e,each_value:t.each_value,btn_index:t.btn_index}},m:function(e,t){insertNode(n,e,t),appendNode(r,n),h&&h.m(r,null),appendNode(a,r),appendNode(i,r),appendNode(s,r),appendNode(c,r),appendNode(l,c)},p:function(t,s){u=s.btn,s.each_value,s.btn_index,u.isFileUpload?h?h.p(t,s):((h=create_if_block_1$1(e,s)).c(),h.m(r,a)):h&&(h.u(),h.d(),h=null),t.buttons&&o!==(o=u.icon+" svelte-oe6wy4")&&(i.className=o),t.buttons&&p!==(p=u.title)&&(l.data=p),(t.active||t.buttons)&&d!==(d="action "+(s.active==u?"active":"")+" svelte-oe6wy4")&&(n.className=d),n._svelte.each_value=s.each_value,n._svelte.btn_index=s.btn_index},u:function(){detachNode(n),h&&h.u()},d:function(){h&&h.d(),removeListener(n,"click",click_handler)}}}function create_if_block_1$1(e,t){var n;t.btn,t.each_value,t.btn_index;return{c:function(){n=createElement("input"),this.h()},h:function(){addListener(n,"change",change_handler),n.accept=".csv, .tsv, .txt, .xlsx, .xls, .ods, .dbf",n.className="file-upload svelte-oe6wy4",setAttribute(n,"type","file"),n._svelte={component:e,each_value:t.each_value,btn_index:t.btn_index}},m:function(e,t){insertNode(n,e,t)},p:function(e,t){t.btn,t.each_value,t.btn_index,n._svelte.each_value=t.each_value,n._svelte.btn_index=t.btn_index},u:function(){detachNode(n)},d:function(){removeListener(n,"change",change_handler)}}}function create_if_block_2$1(e,t){var n,r,a,i;function o(t){e.set({error:!1})}return{c:function(){n=createElement("div"),(r=createElement("div")).textContent="âœ•",a=createText("\n                    "),i=createElement("noscript"),this.h()},h:function(){addListener(r,"click",o),r.className="action close",n.className="alert alert-error"},m:function(e,o){insertNode(n,e,o),appendNode(r,n),appendNode(a,n),appendNode(i,n),i.insertAdjacentHTML("afterend",t.error)},p:function(e,t){e.error&&(detachAfter(i),i.insertAdjacentHTML("afterend",t.error))},u:function(){detachAfter(i),detachNode(n)},d:function(){removeListener(r,"click",o)}}}function change_handler(e){var t=this._svelte.component,n=this._svelte.each_value[this._svelte.btn_index];t.btnUpload(n,e)}function click_handler(e){var t=this._svelte.component,n=this._svelte.each_value[this._svelte.btn_index];t.btnAction(n)}function UploadStep(e){init(this,e),this._state=assign(data$6(),e.data);var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$5(this,this._state),this.root._oncreate.push(function(){oncreate$1.call(t),t.fire("update",{changed:{dragover:1,buttons:1,active:1,error:1,Sidebar:1,chartData:1,readonly:1,sheets:1,datasets:1,MainPanel:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function data$7(){return{notoggle:!1,id:!1,open:!0}}assign(UploadStep.prototype,proto),assign(UploadStep.prototype,methods$2);var methods$3={toggle:function(){if(!this.get().notoggle){var e=this.get(),t=e.open,n=e.id;if(n){var r=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};r["locator-map"]||(r["locator-map"]={}),r["locator-map"][n]="open"==r["locator-map"][n]?"closed":"open",window.localStorage.setItem("dw-vis-groups",JSON.stringify(r))}this.set({open:!t})}}};function oncreate$2(){var e=this.get()||{},t=e.id;if(!e.notoggle&&t){var n=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};n["locator-map"]&&n["locator-map"][t]&&this.set({open:"closed"!=n["locator-map"][t]})}}function create_main_fragment$6(e,t){var n,r,a,i,o,s,c=!t.notoggle&&create_if_block$4(e,t);function l(t){e.toggle()}var d=t.open&&create_if_block_1$2(e,t);return{c:function(){n=createElement("div"),r=createElement("label"),c&&c.c(),a=createText("\n        "),i=createElement("noscript"),o=createText("\n\n    "),d&&d.c(),this.h()},h:function(){addListener(r,"click",l),r.className="group-title svelte-cx9ls9",n.className=s="vis-option-type-group "+(t.open?"group-open":"")+" "+(t.notoggle?"notoggle":"")+" svelte-cx9ls9"},m:function(e,s){insertNode(n,e,s),appendNode(r,n),c&&c.m(r,null),appendNode(a,r),appendNode(i,r),i.insertAdjacentHTML("afterend",t.label),appendNode(o,n),d&&d.m(n,null)},p:function(t,o){o.notoggle?c&&(c.u(),c.d(),c=null):c||((c=create_if_block$4(e,o)).c(),c.m(r,a)),t.label&&(detachAfter(i),i.insertAdjacentHTML("afterend",o.label)),o.open?d||((d=create_if_block_1$2(e,o)).c(),d.m(n,null)):d&&(d.u(),d.d(),d=null),(t.open||t.notoggle)&&s!==(s="vis-option-type-group "+(o.open?"group-open":"")+" "+(o.notoggle?"notoggle":"")+" svelte-cx9ls9")&&(n.className=s)},u:function(){detachAfter(i),detachNode(n),c&&c.u(),d&&d.u()},d:function(){c&&c.d(),removeListener(r,"click",l),d&&d.d()}}}function create_if_block$4(e,t){var n,r,a;return{c:function(){n=createElement("i"),r=createText("\n        "),a=createElement("i"),this.h()},h:function(){n.className="fa fa-chevron-up expand-group pull-right",a.className="fa fa-chevron-down collapse-group pull-right"},m:function(e,t){insertNode(n,e,t),insertNode(r,e,t),insertNode(a,e,t)},u:function(){detachNode(n),detachNode(r),detachNode(a)},d:noop}}function create_if_block_1$2(e,t){var n,r=e._slotted.default;return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="option-group-content vis-option-type-chart-description"},m:function(e,t){insertNode(n,e,t),r&&appendNode(r,n)},u:function(){detachNode(n),r&&reinsertChildren(n,r)},d:noop}}function Group(e){init(this,e),this._state=assign(data$7(),e.data),this._slotted=e.slots||{};var t=this;e.root||(this._oncreate=[]),this.slots={},this._fragment=create_main_fragment$6(this,this._state),this.root._oncreate.push(function(){oncreate$2.call(t),t.fire("update",{changed:{open:1,notoggle:1,label:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._oncreate))}function active(e){return e.$type}function chartTypes(e){return e.$visualizations.filter(function(e){return e.title&&"chart"===e["svelte-workflow"]&&"map"!==e.namespace})}function activeChartTypes(e){return e.chartTypes.filter(function(e){return!e.archived})}function archivedChartTypes(e){return e.chartTypes.filter(function(e){return e.archived})}assign(Group.prototype,proto),assign(Group.prototype,methods$3);var methods$4={select:function(e){this.store.set({type:e.id})}};function create_main_fragment$7(e,t){for(var n,r,a,i,o,s,c,l=!1,d=t.activeChartTypes,u=[],p=0;p<d.length;p+=1)u[p]=create_each_block$4(e,assign(assign({},t),{each_value:d,vis:d[p],vis_index:p}));var h=t.archivedChartTypes,f=[];for(p=0;p<h.length;p+=1)f[p]=create_each_block_1$1(e,assign(assign({},t),{each_value_1:h,vis:h[p],vis_index_1:p}));function _(){l=!0,e.set({active:selectValue(s)}),l=!1}return{c:function(){n=createElement("div"),r=createElement("div");for(var e=0;e<u.length;e+=1)u[e].c();a=createText("\n    "),i=createElement("div"),o=createText("Archived chart types:\n        "),s=createElement("select"),c=createElement("option");for(e=0;e<f.length;e+=1)f[e].c();this.h()},h:function(){r.className="vis-thumbs",c.__value=t.undefined,c.value=c.__value,addListener(s,"change",_),"active"in t||e.root._beforecreate.push(_),i.className="vis-archive-select",n.className="vis-selector-unfolded"},m:function(e,l){insertNode(n,e,l),appendNode(r,n);for(var d=0;d<u.length;d+=1)u[d].m(r,null);appendNode(a,n),appendNode(i,n),appendNode(o,i),appendNode(s,i),appendNode(c,s);for(d=0;d<f.length;d+=1)f[d].m(s,null);selectOption(s,t.active)},p:function(t,n){var a=n.activeChartTypes;if(t.activeChartTypes||t.active){for(var i=0;i<a.length;i+=1){var o=assign(assign({},n),{each_value:a,vis:a[i],vis_index:i});u[i]?u[i].p(t,o):(u[i]=create_each_block$4(e,o),u[i].c(),u[i].m(r,null))}for(;i<u.length;i+=1)u[i].u(),u[i].d();u.length=a.length}t.undefined&&(c.__value=n.undefined),c.value=c.__value;var d=n.archivedChartTypes;if(t.archivedChartTypes){for(i=0;i<d.length;i+=1){var p=assign(assign({},n),{each_value_1:d,vis:d[i],vis_index_1:i});f[i]?f[i].p(t,p):(f[i]=create_each_block_1$1(e,p),f[i].c(),f[i].m(s,null))}for(;i<f.length;i+=1)f[i].u(),f[i].d();f.length=d.length}l||selectOption(s,n.active)},u:function(){detachNode(n);for(var e=0;e<u.length;e+=1)u[e].u();for(e=0;e<f.length;e+=1)f[e].u()},d:function(){destroyEach(u),destroyEach(f),removeListener(s,"change",_)}}}function create_each_block$4(e,t){var n,r,a,i,o,s,c=t.vis,l=(t.each_value,t.vis_index,c.icon),d=c.title;return{c:function(){n=createElement("a"),r=createElement("noscript"),a=createText("\n            "),i=createElement("div"),o=createText(d),this.h()},h:function(){i.className="title",addListener(n,"click",click_handler$1),n.className=s="vis-thumb "+(t.active===c.id?"active":""),n._svelte={component:e,each_value:t.each_value,vis_index:t.vis_index}},m:function(e,t){insertNode(n,e,t),appendNode(r,n),r.insertAdjacentHTML("beforebegin",l),appendNode(a,n),appendNode(i,n),appendNode(o,i)},p:function(e,t){c=t.vis,t.each_value,t.vis_index,e.activeChartTypes&&l!==(l=c.icon)&&(detachBefore(r),r.insertAdjacentHTML("beforebegin",l)),e.activeChartTypes&&d!==(d=c.title)&&(o.data=d),(e.active||e.activeChartTypes)&&s!==(s="vis-thumb "+(t.active===c.id?"active":""))&&(n.className=s),n._svelte.each_value=t.each_value,n._svelte.vis_index=t.vis_index},u:function(){detachBefore(r),detachNode(n)},d:function(){removeListener(n,"click",click_handler$1)}}}function create_each_block_1$1(e,t){var n,r,a,i=t.vis,o=(t.each_value_1,t.vis_index_1,i.title);return{c:function(){n=createElement("option"),r=createText(o),this.h()},h:function(){n.__value=a=i.id,n.value=n.__value},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:function(e,t){i=t.vis,t.each_value_1,t.vis_index_1,e.archivedChartTypes&&o!==(o=i.title)&&(r.data=o),e.archivedChartTypes&&a!==(a=i.id)&&(n.__value=a),n.value=n.__value},u:function(){detachNode(n)},d:noop}}function click_handler$1(e){var t=this._svelte.component,n=this._svelte.each_value[this._svelte.vis_index];t.select(n)}function VisSelector(e){init(this,e),this._state=assign(assign({undefined:void 0},this.store._init(["type","visualizations"])),e.data),this.store._add(this,["type","visualizations"]),this._recompute({$type:1,$visualizations:1,chartTypes:1},this._state),this._handlers.destroy=[removeFromStore],e.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=create_main_fragment$7(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._beforecreate))}function create_main_fragment$8(e,t){var n,r,a,i,o,s,c,l,d,u,p,h,f,_,m,v,g,b,N,y,x,w,k,E,M,T,Y,S,$,A,D,C,L,H,B,j,P,O=__("Title"),z=!1,U=__("Description"),I=!1,F=__("Notes"),R=!1,W=__("Source name"),V=!1,G=__("Source URL"),q=!1,J=__("visualize / annotate / byline"),K=!1;function X(){z=!0,e.store.set({title:l.value}),z=!1}function Q(){var t=e.get(),n=e.store.get();I=!0,t.$metadata.describe.intro=f.value,e.store.set({metadata:n.metadata}),I=!1}function Z(){var t=e.get(),n=e.store.get();R=!0,t.$metadata.annotate.notes=b.value,e.store.set({metadata:n.metadata}),R=!1}function ee(){var t=e.get(),n=e.store.get();V=!0,t.$metadata.describe["source-name"]=M.value,e.store.set({metadata:n.metadata}),V=!1}function te(){var t=e.get(),n=e.store.get();q=!0,t.$metadata.describe["source-url"]=D.value,e.store.set({metadata:n.metadata}),q=!1}function ne(){var t=e.get(),n=e.store.get();K=!0,t.$metadata.describe.byline=P.value,e.store.set({metadata:n.metadata}),K=!1}return{c:function(){n=createElement("div"),r=createElement("div"),(a=createElement("label")).innerHTML='<input type="checkbox"> hide',i=createText("\n        "),o=createElement("label"),s=createText(O),c=createText("\n        "),l=createElement("input"),d=createText("\n\n        "),u=createElement("label"),p=createText(U),h=createText("\n        "),f=createElement("textarea"),_=createText("\n\n        "),m=createElement("label"),v=createText(F),g=createText("\n        "),b=createElement("input"),N=createText("\n\n    "),y=createElement("div"),x=createElement("div"),w=createElement("label"),k=createText(W),E=createText("\n            "),M=createElement("input"),T=createText("\n        "),Y=createElement("div"),S=createElement("label"),$=createText(G),A=createText("\n            "),D=createElement("input"),C=createText("\n\n    "),L=createElement("div"),H=createElement("label"),B=createText(J),j=createText("\n        "),P=createElement("input"),this.h()},h:function(){a.className="hide-title svelte-18mezzx",o.className="control-label",o.htmlFor="text-title",addListener(l,"input",X),l.className="input-xlarge span4",l.autocomplete="off",setAttribute(l,"type","text"),u.className="control-label",u.htmlFor="text-intro",addListener(f,"input",Q),f.id="text-intro",f.className="input-xlarge span4",m.className="control-label",m.htmlFor="text-notes",addListener(b,"input",Z),b.className="input-xlarge span4",setAttribute(b,"type","text"),r.className="pull-left",setStyle(r,"position","relative"),w.className="control-label",addListener(M,"input",ee),M.className="span2",M.placeholder=__("name of the organisation"),setAttribute(M,"type","text"),x.className="span2",S.className="control-label",addListener(D,"input",te),D.className="span2",D.placeholder=__("URL of the dataset"),setAttribute(D,"type","text"),Y.className="span2",y.className="row",H.className="control-label",addListener(P,"input",ne),P.className="input-xlarge span4",P.placeholder=__("visualize / annotate / byline / placeholder"),setAttribute(P,"type","text"),L.className="chart-byline",n.className="story-title control-group"},m:function(e,O){insertNode(n,e,O),appendNode(r,n),appendNode(a,r),appendNode(i,r),appendNode(o,r),appendNode(s,o),appendNode(c,r),appendNode(l,r),l.value=t.$title,appendNode(d,r),appendNode(u,r),appendNode(p,u),appendNode(h,r),appendNode(f,r),f.value=t.$metadata.describe.intro,appendNode(_,r),appendNode(m,r),appendNode(v,m),appendNode(g,r),appendNode(b,r),b.value=t.$metadata.annotate.notes,appendNode(N,n),appendNode(y,n),appendNode(x,y),appendNode(w,x),appendNode(k,w),appendNode(E,x),appendNode(M,x),M.value=t.$metadata.describe["source-name"],appendNode(T,y),appendNode(Y,y),appendNode(S,Y),appendNode($,S),appendNode(A,Y),appendNode(D,Y),D.value=t.$metadata.describe["source-url"],appendNode(C,n),appendNode(L,n),appendNode(H,L),appendNode(B,H),appendNode(j,L),appendNode(P,L),P.value=t.$metadata.describe.byline},p:function(e,t){z||(l.value=t.$title),I||(f.value=t.$metadata.describe.intro),R||(b.value=t.$metadata.annotate.notes),V||(M.value=t.$metadata.describe["source-name"]),q||(D.value=t.$metadata.describe["source-url"]),K||(P.value=t.$metadata.describe.byline)},u:function(){detachNode(n)},d:function(){removeListener(l,"input",X),removeListener(f,"input",Q),removeListener(b,"input",Z),removeListener(M,"input",ee),removeListener(D,"input",te),removeListener(P,"input",ne)}}}function ChartDescription(e){init(this,e),this._state=assign(this.store._init(["title","metadata"]),e.data),this.store._add(this,["title","metadata"]),this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment$8(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function data$8(){return{active:"vis"}}assign(VisSelector.prototype,proto),assign(VisSelector.prototype,methods$4),VisSelector.prototype._recompute=function(e,t){e.$type&&this._differs(t.active,t.active=active(t))&&(e.active=!0),e.$visualizations&&this._differs(t.chartTypes,t.chartTypes=chartTypes(t))&&(e.chartTypes=!0),e.chartTypes&&(this._differs(t.activeChartTypes,t.activeChartTypes=activeChartTypes(t))&&(e.activeChartTypes=!0),this._differs(t.archivedChartTypes,t.archivedChartTypes=archivedChartTypes(t))&&(e.archivedChartTypes=!0))},assign(ChartDescription.prototype,proto);var methods$5={tabNav:function(e,t){e.preventDefault(),this.set({active:t})}};function create_main_fragment$9(e,t){var n,r,a,i,o,s,c,l,d,u,p,h,f,_,m,v,g,b,N,y,x,w,k=__("Chart type"),E=__("Refine"),M=__("Annotate"),T=__("Design");function Y(t){e.tabNav(t,"vis")}function S(t){e.tabNav(t,"refine")}function $(t){e.tabNav(t,"annotate")}function A(t){e.tabNav(t,"design")}function D(e){return"vis"===e.active?create_if_block$5:"refine"==e.active?create_if_block_1$3:"annotate"==e.active?create_if_block_2$2:"design"==e.active?create_if_block_3:null}var C=D(t),L=C&&C(e,t);return{c:function(){n=createElement("div"),r=createElement("div"),a=createElement("div"),i=createElement("ul"),o=createElement("li"),s=createElement("a"),l=createElement("li"),d=createElement("a"),p=createElement("li"),h=createElement("a"),_=createElement("li"),m=createElement("a"),g=createText("\n\n            "),b=createElement("div"),N=createElement("div"),L&&L.c(),x=createText("\n\n        "),(w=createElement("div")).textContent="PREVIEW",this.h()},h:function(){addListener(s,"click",Y),s.href="#vis",o.className=c="vis"===t.active?"active":"",addListener(d,"click",S),d.href="#refine",l.className=u="refine"===t.active?"active":"",addListener(h,"click",$),h.href="#annotate",p.className=f="annotate"===t.active?"active":"",addListener(m,"click",A),m.href="#design",_.className=v="design"===t.active?"active":"",i.className="nav nav-tabs visualize-nav-tabs",i.dataset.target="tab-container",N.className=y="section "+t.active+" svelte-en2xks",b.className="tab-container",a.className="span4 visconfig",setStyle(a,"min-height","516px"),w.className="span8",r.className="row",n.className="dw-create-visualize chart-editor chart-editor-web"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,r),appendNode(i,a),appendNode(o,i),appendNode(s,o),s.innerHTML=k,appendNode(l,i),appendNode(d,l),d.innerHTML=E,appendNode(p,i),appendNode(h,p),h.innerHTML=M,appendNode(_,i),appendNode(m,_),m.innerHTML=T,appendNode(g,a),appendNode(b,a),appendNode(N,b),L&&L.m(N,null),appendNode(x,r),appendNode(w,r)},p:function(t,n){t.active&&c!==(c="vis"===n.active?"active":"")&&(o.className=c),t.active&&u!==(u="refine"===n.active?"active":"")&&(l.className=u),t.active&&f!==(f="annotate"===n.active?"active":"")&&(p.className=f),t.active&&v!==(v="design"===n.active?"active":"")&&(_.className=v),C!==(C=D(n))&&(L&&(L.u(),L.d()),(L=C&&C(e,n))&&L.c(),L&&L.m(N,null)),t.active&&y!==(y="section "+n.active+" svelte-en2xks")&&(N.className=y)},u:function(){s.innerHTML="",d.innerHTML="",h.innerHTML="",m.innerHTML="",detachNode(n),L&&L.u()},d:function(){removeListener(s,"click",Y),removeListener(d,"click",S),removeListener(h,"click",$),removeListener(m,"click",A),L&&L.d()}}}function create_if_block$5(e,t){var n,r,a,i,o,s,c,l=__("Hint"),d=__("visualize / transpose-hint").replace("[LINK]",'<a href="#" id="btn-transpose"><img style="height:14px" src="/static/css/chart-editor/transpose.png" />').replace("[/LINK]","</a>"),u=new VisSelector({root:e.root});return{c:function(){u._fragment.c(),n=createText("\n                        "),r=createElement("p"),a=createElement("b"),i=createText(l),o=createText(":"),s=createText(" "),c=createElement("noscript")},m:function(e,t){u._mount(e,t),insertNode(n,e,t),insertNode(r,e,t),appendNode(a,r),appendNode(i,a),appendNode(o,a),appendNode(s,r),appendNode(c,r),c.insertAdjacentHTML("afterend",d)},u:function(){detachAfter(c),u._unmount(),detachNode(n),detachNode(r)},d:function(){u.destroy(!1)}}}function create_if_block_1$3(e,t){var n;return{c:function(){n=createText("REFINE")},m:function(e,t){insertNode(n,e,t)},u:function(){detachNode(n)},d:noop}}function create_if_block_2$2(e,t){var n,r,a,i=new ChartDescription({root:e.root}),o={label:__("Annotate your chart")},s=new Group({root:e.root,slots:{default:createFragment()},data:o});return{c:function(){n=createElement("div"),r=createText("\n                                "),i._fragment.c(),a=createText("\n                            "),s._fragment.c(),this.h()},h:function(){n.className="story"},m:function(e,t){insertNode(n,e,t),appendNode(r,s._slotted.default),i._mount(s._slotted.default,null),appendNode(a,s._slotted.default),s._mount(n,null)},u:function(){detachNode(n)},d:function(){i.destroy(!1),s.destroy(!1)}}}function create_if_block_3(e,t){var n;return{c:function(){n=createText("DESIGN")},m:function(e,t){insertNode(n,e,t)},u:function(){detachNode(n)},d:noop}}function VisualizeStep(e){init(this,e),this._state=assign(data$8(),e.data),e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$9(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function data$9(){return{visible:!1}}assign(VisualizeStep.prototype,proto),assign(VisualizeStep.prototype,methods$5);var methods$6={show:function(){var e=this,t=setTimeout(function(){e.set({visible:!0})},400);this.set({t:t})},hide:function(){var e=this.get().t;clearTimeout(e),this.set({visible:!1})}};function create_main_fragment$10(e,t){var n,r,a;function i(e){return e.visible?create_if_block$6:create_if_block_1$4}var o=i(t),s=o(e,t),c=t.visible&&create_if_block_2$3(e,t);function l(t){e.show()}function d(t){e.hide()}return{c:function(){n=createElement("div"),r=createElement("span"),s.c(),a=createText("\n    "),c&&c.c(),this.h()},h:function(){r.className="svelte-1mkn8ur",addListener(n,"mouseenter",l),addListener(n,"mouseleave",d),n.className="help svelte-1mkn8ur"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),s.m(r,null),appendNode(a,n),c&&c.m(n,null)},p:function(t,a){o!==(o=i(a))&&(s.u(),s.d(),(s=o(e,a)).c(),s.m(r,null)),a.visible?c||((c=create_if_block_2$3(e,a)).c(),c.m(n,null)):c&&(c.u(),c.d(),c=null)},u:function(){detachNode(n),s.u(),c&&c.u()},d:function(){s.d(),c&&c.d(),removeListener(n,"mouseenter",l),removeListener(n,"mouseleave",d)}}}function create_if_block$6(e,t){var n;return{c:function(){n=createElement("i"),this.h()},h:function(){n.className="im im-graduation-hat svelte-1mkn8ur"},m:function(e,t){insertNode(n,e,t)},u:function(){detachNode(n)},d:noop}}function create_if_block_1$4(e,t){var n;return{c:function(){n=createText("?")},m:function(e,t){insertNode(n,e,t)},u:function(){detachNode(n)},d:noop}}function create_if_block_2$3(e,t){var n,r=e._slotted.default;return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="content svelte-1mkn8ur"},m:function(e,t){insertNode(n,e,t),r&&appendNode(r,n)},u:function(){detachNode(n),r&&reinsertChildren(n,r)},d:noop}}function Help(e){init(this,e),this._state=assign(data$9(),e.data),this._slotted=e.slots||{},this.slots={},this._fragment=create_main_fragment$10(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function data$10(){return{loading:!1}}function create_main_fragment$11(e,t){var n,r=t.loading&&create_if_block$7(e,t);return{c:function(){r&&r.c(),n=createComment()},m:function(e,t){r&&r.m(e,t),insertNode(n,e,t)},p:function(t,a){a.loading?r||((r=create_if_block$7(e,a)).c(),r.m(n.parentNode,n)):r&&(r.u(),r.d(),r=null)},u:function(){r&&r.u(),detachNode(n)},d:function(){r&&r.d()}}}function create_if_block$7(e,t){var n;return{c:function(){(n=createElement("p")).innerHTML='<i class="fa fa-spinner fa-pulse fa-fw"></i> loading...',this.h()},h:function(){n.className="mini-help"},m:function(e,t){insertNode(n,e,t)},u:function(){detachNode(n)},d:noop}}function Action(e){init(this,e),this._state=assign(data$10(),e.data),this._fragment=create_main_fragment$11(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}assign(Help.prototype,proto),assign(Help.prototype,methods$6),assign(Action.prototype,proto);var widths=[100,200,300,400,500,700,800,900,1e3];function computeEmbedHeights(){var e={},t=window.$,n=t(t("#iframe-vis")[0].contentDocument),r=t("h1",n).height()+t(".chart-intro",n).height()+t(".dw-chart-notes",n).height(),a=t("#iframe-vis").height();return widths.forEach(function(i){n.find("h1,.chart-intro,.dw-chart-notes").css("width",i+"px");var o=t("h1",n).height()+t(".chart-intro",n).height()+t(".dw-chart-notes",n).height();e[i]=a+(o-r)}),n.find("h1,.chart-intro,.dw-chart-notes").css("width","auto"),e}var fakeProgress=0,initial_auto_publish=!0;function shareUrl(e){var t=e.shareurl_type,n=e.$id,r=e.$publicUrl,a=e.plugin_shareurls;if(!e.published)return"https://www.datawrapper.de/...";if("default"==t)return r;var i="";return a.forEach(function(e){e.id==t&&(i=e.url.replace(/%chart_id%/g,n))}),i}function embedCode(e){var t=e.embed_type,n=e.$metadata,r=e.$publicUrl;return n?n.publish&&!n.publish["embed-codes"]?'<iframe src="'+r+'" width="100%" height="'+n.publish["embed-height"]+'" scrolling="no" frameborder="0" allowtransparency="true"></iframe>':n.publish["embed-codes"]["embed-method-"+t]:""}function sortedChartActions(e){var t=e.chartActions,n=e.$actions;return t.concat(n).filter(function(e){return"publish-s3"!=e.id}).sort(function(e,t){return e.order-t.order})}function data_1(){return{active_action:"",embed_templates:[],plugin_shareurls:[],published:!1,publishing:!1,needs_republish:!1,publish_error:!1,auto_publish:!1,progress:0,shareurl_type:"default",embed_type:"responsive",copy_success:!1,Action:Action,chartActions:[{id:"duplicate",icon:"code-fork",title:__("Duplicate"),order:500,action:"duplicate"}],publishHed:"",publishIntro:"",beforeExport:null,exportHed:__("publish / export-duplicate"),exportIntro:__("publish / export-duplicate / intro")}}var methods$7={publish:function(){var e=this;this.set({publishing:!0,progress:0,publish_error:!1});var t=this.store;t.setMetadata("publish.embed-heights",computeEmbedHeights(t,this.get().embed_templates)),trackEvent("Chart Editor","publish"),t.store(function(){postJSON("/api/charts/"+t.get().id+"/publish",null,function(t){"ok"==t.status?(e.publishFinished(t.data),trackEvent("Chart Editor","publish-success")):(trackEvent("Chart Editor","publish-error",t.message),e.set({publish_error:t.message}))}),fakeProgress=0,e.updateStatus()})},updateProgressBar:function(e){this.refs.bar&&(this.refs.bar.style.width=(100*e).toFixed()+"%")},updateStatus:function(){var e=this,t=this.store;fakeProgress+=.05,getJSON("/api/charts/"+t.get().id+"/publish/status",function(t){t&&(t=+t/100+fakeProgress,e.set({progress:Math.min(1,t)})),e.get().publishing&&setTimeout(function(){e.updateStatus()},400)})},publishFinished:function(e){var t=this;this.set({progress:1,published:!0,needs_republish:!1}),this.store.set({lastEditStep:5}),setTimeout(function(){return t.set({publishing:!1})},500),this.store.set(e)},copy:function(){var e=this;e.refs.embedInput.select();try{document.execCommand("copy")&&(trackEvent("Chart Editor","embedcode-copy"),e.set({copy_success:!0}),setTimeout(function(){return e.set({copy_success:!1})},300))}catch(e){}},select:function(e,t){var n=this;t.preventDefault();var r=this.get().active_action;if(e.id==r)return this.set({active_action:"",Action:Action});this.set({active_action:e.id}),e.mod?e.mod.App?this.set({Action:e.mod.App}):(this.set({Action:Action}),this.refs.action.set({loading:!0}),e.mod.css&&loadStylesheet(e.mod.css),loadScript(e.mod.src,function(){setTimeout(function(){require([e.mod.id],function(t){Object.assign(e.mod,t),n.set({Action:e.mod.App}),t.init&&t.init(n.refs.action),e.mod.data&&n.refs.action.set(e.mod.data)})},200)})):e.action&&this[e.action]&&(this.set({Action:Action}),this[e.action]())},duplicate:function(){var e=this.store.get().id;trackEvent("Chart Editor","duplicate"),postJSON("/api/charts/"+e+"/copy",null,function(e){"ok"==e.status?window.location.href="/edit/"+e.data.id+"/visualize":console.warn(data)})}};function oncreate$3(){var e=this.store.get().lastEditStep;this.set({published:e>4})}function onstate(e){var t=e.changed,n=e.current,r=window.dw&&window.dw.backend&&window.dw.backend.setUserData;if(t.publishing&&n.publishing&&this.updateProgressBar(n.progress),t.progress&&this.updateProgressBar(n.progress),t.embed_type&&r){var a=window.dw.backend.__userData;if(!n.embed_type||!a)return;a.embed_type=n.embed_type,window.dw.backend.setUserData(a)}if(t.shareurl_type&&r){var i=window.dw.backend.__userData;if(!n.shareurl_type||!i)return;i.shareurl_type=n.shareurl_type,window.dw.backend.setUserData(i)}t.published&&window.document.querySelector(".dw-create-publish .publish-step").classList[n.published?"add":"remove"]("is-published"),t.auto_publish&&n.auto_publish&&initial_auto_publish&&(this.publish(),initial_auto_publish=!1,window.history.replaceState("","",location.pathname))}function create_main_fragment$12(e,t){var n,r,a,i,o,s,c,l,d,u,p,h,f,_,m,v,g,b,N,y,x,w,k,E,M,T,Y,S,$,A,D,C,L,H,B,j,P,O,z,U,I,F,R,W,V,G,q,J,K,X,Q,Z,ee,te,ne,re,ae,ie,oe,se,ce,le,de,ue,pe,he,fe,_e,me,ve,ge,be,Ne,ye=__("publish / share-embed"),xe=__("publish / share-url"),we=__("publish / share-url / fullscreen"),ke=__("publish / help / share-url"),Ee=__("publish / embed"),Me=__("publish / copy"),Te=__("publish / copy-success"),Ye=__("publish / embed / help"),Se=e._slotted.export_actions_header,$e=t.publishHed&&create_if_block$8(e,t);function Ae(e){return e.publishIntro?create_if_block_1$5:e.published?create_if_block_2$4:create_if_block_3$1}var De=Ae(t),Ce=De(e,t);function Le(e){return e.published?create_if_block_4:create_if_block_5}var He=Le(t),Be=He(e,t);function je(t){e.publish()}var Pe=!t.published&&create_if_block_6(e,t),Oe=t.needs_republish&&!t.publishing&&create_if_block_7(e,t),ze=t.published&&!t.needs_republish&&1==t.progress&&!t.publishing&&create_if_block_8(e,t),Ue=t.publish_error&&create_if_block_9(e,t),Ie=t.publishing&&create_if_block_10(e,t);function Fe(){e.set({shareurl_type:E.__value})}for(var Re=t.plugin_shareurls,We=[],Ve=0;Ve<Re.length;Ve+=1)We[Ve]=create_each_block$5(e,assign(assign({},t),{each_value:Re,tpl:Re[Ve],tpl_index:Ve}));var Ge=new Help({root:e.root,slots:{default:createFragment()}}),qe=t.embed_templates,Je=[];for(Ve=0;Ve<qe.length;Ve+=1)Je[Ve]=create_each_block_1$2(e,assign(assign({},t),{each_value_1:qe,tpl:qe[Ve],tpl_index_1:Ve}));function Ke(t){var n=e.get();e.copy(n.embedCode)}var Xe=t.embed_templates.slice(2),Qe=[];for(Ve=0;Ve<Xe.length;Ve+=1)Qe[Ve]=create_each_block_2(e,assign(assign({},t),{each_value_2:Xe,tpl:Xe[Ve],tpl_index_2:Ve}));var Ze=new Help({root:e.root,slots:{default:createFragment()}}),et=t.beforeExport;function tt(t){return{root:e.root}}if(et)var nt=new et(tt());var rt=t.exportIntro&&create_if_block_11(e,t),at=t.sortedChartActions,it=[];for(Ve=0;Ve<at.length;Ve+=1)it[Ve]=create_each_block_3(e,assign(assign({},t),{each_value_3:at,action:at[Ve],action_index:Ve}));var ot=t.Action;function st(t){return{root:e.root,data:{visible:!0,show:!0}}}if(ot)var ct=new ot(st());return{c:function(){n=createElement("div"),$e&&$e.c(),r=createText("\n    "),Ce.c(),a=createText("\n\n    "),i=createElement("button"),Be.c(),s=createText("\n\n\n    "),Pe&&Pe.c(),c=createText("\n\n\n    "),Oe&&Oe.c(),l=createText("\n    "),ze&&ze.c(),d=createText("\n\n    "),Ue&&Ue.c(),u=createText("\n\n    "),Ie&&Ie.c(),p=createText("\n\n    "),h=createElement("div"),f=createElement("h2"),_=createText("\n        "),m=createElement("div"),v=createElement("i"),g=createText("\n            "),b=createElement("div"),N=createElement("div"),y=createElement("b"),x=createText("\n                    "),w=createElement("div"),k=createElement("label"),E=createElement("input"),M=createText(" "),T=createElement("noscript"),Y=createText("\n                        ");for(var e=0;e<We.length;e+=1)We[e].c();S=createText("\n                "),$=createElement("div"),A=createElement("a"),D=createText(t.shareUrl),C=createText("\n            "),L=createText("\n                "),H=createElement("div"),B=createText("\n            "),Ge._fragment.c(),j=createText("\n\n        "),P=createElement("div"),O=createElement("i"),z=createText("\n            "),U=createElement("div"),I=createElement("div"),F=createElement("b"),R=createText("\n                    "),W=createElement("div");for(e=0;e<Je.length;e+=1)Je[e].c();V=createText("\n                "),G=createElement("div"),q=createElement("input"),J=createText(" "),K=createElement("button"),X=createElement("i"),Q=createText(" "),Z=createText(Me),ee=createText("\n                    "),te=createElement("div"),ne=createText(Te),ae=createText("\n            "),ie=createText("\n                "),oe=createElement("div"),se=createElement("noscript"),ce=createText("\n                    ");for(e=0;e<Qe.length;e+=1)Qe[e].c();le=createText("\n            "),Ze._fragment.c(),ue=createText("\n\n    \n    "),nt&&nt._fragment.c(),pe=createText("\n\n    \n    "),he=createElement("div"),Se||(_e=createElement("h2"),me=createText("\n            "),rt&&rt.c(),ve=createComment()),ge=createText("\n\n        "),be=createElement("ul");for(e=0;e<it.length;e+=1)it[e].c();Ne=createText("\n\n        "),ct&&ct._fragment.c(),this.h()},h:function(){addListener(i,"click",je),i.disabled=t.publishing,i.className=o="btn-publish btn btn-primary btn-large "+(t.published?"":"btn-first-publish")+" svelte-pryd0d",v.className="icon fa fa-link fa-fw",e._bindingGroups[0].push(E),addListener(E,"change",Fe),E.__value="default",E.value=E.__value,setAttribute(E,"type","radio"),E.name="url-type",E.className="svelte-pryd0d",k.className="radio",w.className="embed-options svelte-pryd0d",N.className="h",A.target="_blank",A.className="share-url svelte-pryd0d",A.href=t.shareUrl,$.className="inpt",b.className="ctrls",m.className="block",O.className="icon fa fa-code fa-fw",W.className="embed-options svelte-pryd0d",I.className="h",setAttribute(q,"type","text"),q.className="input embed-code",q.readOnly=!0,q.value=t.embedCode,X.className="fa fa-copy",addListener(K,"click",Ke),K.className="btn btn-copy",K.title="copy",te.className=re="copy-success "+(t.copy_success?"show":"")+" svelte-pryd0d",G.className="inpt",U.className="ctrls",P.className="block",setStyle(h,"margin-top","30px"),h.className=de=t.published?"":"inactive",Se||(_e.className="pad-top"),be.className="chart-actions",he.className="export-and-duplicate"},m:function(o,re){insertNode(n,o,re),$e&&$e.m(n,null),appendNode(r,n),Ce.m(n,null),appendNode(a,n),appendNode(i,n),Be.m(i,null),appendNode(s,n),Pe&&Pe.m(n,null),appendNode(c,n),Oe&&Oe.m(n,null),appendNode(l,n),ze&&ze.m(n,null),appendNode(d,n),Ue&&Ue.m(n,null),appendNode(u,n),Ie&&Ie.m(n,null),appendNode(p,n),appendNode(h,n),appendNode(f,h),f.innerHTML=ye,appendNode(_,h),appendNode(m,h),appendNode(v,m),appendNode(g,m),appendNode(b,m),appendNode(N,b),appendNode(y,N),y.innerHTML=xe,appendNode(x,N),appendNode(w,N),appendNode(k,w),appendNode(E,k),E.checked=E.__value===t.shareurl_type,appendNode(M,k),appendNode(T,k),T.insertAdjacentHTML("afterend",we),appendNode(Y,w);for(var de=0;de<We.length;de+=1)We[de].m(w,null);appendNode(S,b),appendNode($,b),appendNode(A,$),appendNode(D,A),appendNode(C,m),appendNode(L,Ge._slotted.default),appendNode(H,Ge._slotted.default),H.innerHTML=ke,appendNode(B,Ge._slotted.default),Ge._mount(m,null),appendNode(j,h),appendNode(P,h),appendNode(O,P),appendNode(z,P),appendNode(U,P),appendNode(I,U),appendNode(F,I),F.innerHTML=Ee,appendNode(R,I),appendNode(W,I);for(de=0;de<Je.length;de+=1)Je[de].m(W,null);appendNode(V,U),appendNode(G,U),appendNode(q,G),e.refs.embedInput=q,appendNode(J,G),appendNode(K,G),appendNode(X,K),appendNode(Q,K),appendNode(Z,K),appendNode(ee,G),appendNode(te,G),appendNode(ne,te),appendNode(ae,P),appendNode(ie,Ze._slotted.default),appendNode(oe,Ze._slotted.default),appendNode(se,oe),se.insertAdjacentHTML("beforebegin",Ye),appendNode(ce,oe);for(de=0;de<Qe.length;de+=1)Qe[de].m(oe,null);appendNode(le,Ze._slotted.default),Ze._mount(P,null),appendNode(ue,n),nt&&nt._mount(n,null),appendNode(pe,n),appendNode(he,n),Se?(appendNode(Se,he),appendNode(fe||(fe=createComment()),he)):(appendNode(_e,he),_e.innerHTML=t.exportHed,appendNode(me,he),rt&&rt.m(he,null),appendNode(ve,he)),appendNode(ge,he),appendNode(be,he);for(de=0;de<it.length;de+=1)it[de].m(be,null);appendNode(Ne,he),ct&&(ct._mount(he,null),e.refs.action=ct)},p:function(t,s){s.publishHed?$e?$e.p(t,s):(($e=create_if_block$8(e,s)).c(),$e.m(n,r)):$e&&($e.u(),$e.d(),$e=null),De===(De=Ae(s))&&Ce?Ce.p(t,s):(Ce.u(),Ce.d(),(Ce=De(e,s)).c(),Ce.m(n,a)),He===(He=Le(s))&&Be?Be.p(t,s):(Be.u(),Be.d(),(Be=He(e,s)).c(),Be.m(i,null)),t.publishing&&(i.disabled=s.publishing),t.published&&o!==(o="btn-publish btn btn-primary btn-large "+(s.published?"":"btn-first-publish")+" svelte-pryd0d")&&(i.className=o),s.published?Pe&&(Pe.u(),Pe.d(),Pe=null):Pe||((Pe=create_if_block_6(e,s)).c(),Pe.m(n,c)),s.needs_republish&&!s.publishing?Oe||((Oe=create_if_block_7(e,s)).c(),Oe.m(n,l)):Oe&&(Oe.u(),Oe.d(),Oe=null),!s.published||s.needs_republish||1!=s.progress||s.publishing?ze&&(ze.u(),ze.d(),ze=null):ze||((ze=create_if_block_8(e,s)).c(),ze.m(n,d)),s.publish_error?Ue?Ue.p(t,s):((Ue=create_if_block_9(e,s)).c(),Ue.m(n,u)):Ue&&(Ue.u(),Ue.d(),Ue=null),s.publishing?Ie?Ie.p(t,s):((Ie=create_if_block_10(e,s)).c(),Ie.m(n,p)):Ie&&(Ie.u(),Ie.d(),Ie=null),E.checked=E.__value===s.shareurl_type;var f=s.plugin_shareurls;if(t.shareurl_type||t.plugin_shareurls){for(var _=0;_<f.length;_+=1){var m=assign(assign({},s),{each_value:f,tpl:f[_],tpl_index:_});We[_]?We[_].p(t,m):(We[_]=create_each_block$5(e,m),We[_].c(),We[_].m(w,null))}for(;_<We.length;_+=1)We[_].u(),We[_].d();We.length=f.length}t.shareUrl&&(D.data=s.shareUrl,A.href=s.shareUrl);var v=s.embed_templates;if(t.embed_type||t.embed_templates){for(_=0;_<v.length;_+=1){var g=assign(assign({},s),{each_value_1:v,tpl:v[_],tpl_index_1:_});Je[_]?Je[_].p(t,g):(Je[_]=create_each_block_1$2(e,g),Je[_].c(),Je[_].m(W,null))}for(;_<Je.length;_+=1)Je[_].u(),Je[_].d();Je.length=v.length}t.embedCode&&(q.value=s.embedCode),t.copy_success&&re!==(re="copy-success "+(s.copy_success?"show":"")+" svelte-pryd0d")&&(te.className=re);var b=s.embed_templates.slice(2);if(t.embed_templates){for(_=0;_<b.length;_+=1){var N=assign(assign({},s),{each_value_2:b,tpl:b[_],tpl_index_2:_});Qe[_]?Qe[_].p(t,N):(Qe[_]=create_each_block_2(e,N),Qe[_].c(),Qe[_].m(oe,null))}for(;_<Qe.length;_+=1)Qe[_].u(),Qe[_].d();Qe.length=b.length}t.published&&de!==(de=s.published?"":"inactive")&&(h.className=de),et!==(et=s.beforeExport)&&(nt&&nt.destroy(),et&&((nt=new et(tt()))._fragment.c(),nt._mount(n,pe))),Se||(t.exportHed&&(_e.innerHTML=s.exportHed),s.exportIntro?rt?rt.p(t,s):((rt=create_if_block_11(e,s)).c(),rt.m(ve.parentNode,ve)):rt&&(rt.u(),rt.d(),rt=null));var y=s.sortedChartActions;if(t.sortedChartActions||t.active_action){for(_=0;_<y.length;_+=1){var x=assign(assign({},s),{each_value_3:y,action:y[_],action_index:_});it[_]?it[_].p(t,x):(it[_]=create_each_block_3(e,x),it[_].c(),it[_].m(be,null))}for(;_<it.length;_+=1)it[_].u(),it[_].d();it.length=y.length}if(ot!==(ot=s.Action))ct&&ct.destroy(),ot?((ct=new ot(st()))._fragment.c(),ct._mount(he,null),e.refs.action=ct):e.refs.action===ct&&(e.refs.action=null);else{var k={visible:!0,show:!0};ct._set(k)}},u:function(){f.innerHTML="",y.innerHTML="",detachAfter(T),H.innerHTML="",F.innerHTML="",detachBefore(se),_e.innerHTML="",detachNode(n),$e&&$e.u(),Ce.u(),Be.u(),Pe&&Pe.u(),Oe&&Oe.u(),ze&&ze.u(),Ue&&Ue.u(),Ie&&Ie.u();for(var e=0;e<We.length;e+=1)We[e].u();for(e=0;e<Je.length;e+=1)Je[e].u();for(e=0;e<Qe.length;e+=1)Qe[e].u();Se?reinsertBefore(fe,Se):rt&&rt.u();for(e=0;e<it.length;e+=1)it[e].u()},d:function(){$e&&$e.d(),Ce.d(),Be.d(),removeListener(i,"click",je),Pe&&Pe.d(),Oe&&Oe.d(),ze&&ze.d(),Ue&&Ue.d(),Ie&&Ie.d(),e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(E),1),removeListener(E,"change",Fe),destroyEach(We),Ge.destroy(!1),destroyEach(Je),e.refs.embedInput===q&&(e.refs.embedInput=null),removeListener(K,"click",Ke),destroyEach(Qe),Ze.destroy(!1),nt&&nt.destroy(!1),Se||rt&&rt.d(),destroyEach(it),ct&&ct.destroy(!1)}}}function create_if_block$8(e,t){var n;return{c:function(){n=createElement("h2"),this.h()},h:function(){n.className="pad-top"},m:function(e,r){insertNode(n,e,r),n.innerHTML=t.publishHed},p:function(e,t){e.publishHed&&(n.innerHTML=t.publishHed)},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_1$5(e,t){var n;return{c:function(){n=createElement("p")},m:function(e,r){insertNode(n,e,r),n.innerHTML=t.publishIntro},p:function(e,t){e.publishIntro&&(n.innerHTML=t.publishIntro)},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_2$4(e,t){var n,r=__("publish / republish-intro");return{c:function(){n=createElement("p")},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},p:noop,u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_3$1(e,t){var n,r=__("publish / publish-intro");return{c:function(){n=createElement("p"),this.h()},h:function(){setStyle(n,"margin-bottom","20px")},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},p:noop,u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_4(e,t){var n,r,a,i,o,s,c=__("publish / republish-btn");return{c:function(){n=createElement("span"),r=createElement("i"),i=createText(" "),o=createElement("span"),s=createText(c),this.h()},h:function(){r.className=a="fa fa-fw fa-refresh "+(t.publishing?"fa-spin":"")+" svelte-pryd0d",o.className="title svelte-pryd0d",n.className="re-publish"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(i,n),appendNode(o,n),appendNode(s,o)},p:function(e,t){e.publishing&&a!==(a="fa fa-fw fa-refresh "+(t.publishing?"fa-spin":"")+" svelte-pryd0d")&&(r.className=a)},u:function(){detachNode(n)},d:noop}}function create_if_block_5(e,t){var n,r,a,i,o,s,c=__("publish / publish-btn");return{c:function(){n=createElement("span"),r=createElement("i"),i=createText(" "),o=createElement("span"),s=createText(c),this.h()},h:function(){r.className=a="fa fa-fw "+(t.publishing?"fa-refresh fa-spin":"fa-cloud-upload")+" svelte-pryd0d",o.className="title svelte-pryd0d",n.className="publish"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(i,n),appendNode(o,n),appendNode(s,o)},p:function(e,t){e.publishing&&a!==(a="fa fa-fw "+(t.publishing?"fa-refresh fa-spin":"fa-cloud-upload")+" svelte-pryd0d")&&(r.className=a)},u:function(){detachNode(n)},d:noop}}function create_if_block_6(e,t){var n,r,a,i,o=__("publish / publish-btn-intro");return{c:function(){n=createElement("div"),(r=createElement("div")).innerHTML='<i class="fa fa-chevron-left"></i>',a=createText("\n        "),i=createElement("div"),this.h()},h:function(){r.className="arrow svelte-pryd0d",i.className="text svelte-pryd0d",n.className="publish-intro svelte-pryd0d"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(i,n),i.innerHTML=o},u:function(){i.innerHTML="",detachNode(n)},d:noop}}function create_if_block_7(e,t){var n,r=__("publish / republish-alert");return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="btn-aside alert svelte-pryd0d"},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_8(e,t){var n,r=__("publish / publish-success");return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="alert alert-success svelte-pryd0d"},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_9(e,t){var n;return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="alert alert-error svelte-pryd0d"},m:function(e,r){insertNode(n,e,r),n.innerHTML=t.publish_error},p:function(e,t){e.publish_error&&(n.innerHTML=t.publish_error)},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_10(e,t){var n,r,a,i,o,s,c,l=__("publish / progress / please-wait");return{c:function(){n=createElement("div"),r=createText(l),a=createText("\n        "),i=createElement("div"),o=createElement("div"),this.h()},h:function(){o.className=s="bar "+(t.progress<1?"":"bar-success")+" svelte-pryd0d",i.className="progress progress-striped active svelte-pryd0d",n.className=c="alert "+(t.progress<1?"alert-info":"alert-success")+" publishing svelte-pryd0d"},m:function(t,s){insertNode(n,t,s),appendNode(r,n),appendNode(a,n),appendNode(i,n),appendNode(o,i),e.refs.bar=o},p:function(e,t){e.progress&&s!==(s="bar "+(t.progress<1?"":"bar-success")+" svelte-pryd0d")&&(o.className=s),e.progress&&c!==(c="alert "+(t.progress<1?"alert-info":"alert-success")+" publishing svelte-pryd0d")&&(n.className=c)},u:function(){detachNode(n)},d:function(){e.refs.bar===o&&(e.refs.bar=null)}}}function create_each_block$5(e,t){var n,r,a,i,o,s=t.tpl,c=(t.each_value,t.tpl_index,s.name);function l(){e.set({shareurl_type:r.__value})}return{c:function(){n=createElement("label"),r=createElement("input"),i=createText(" "),o=createElement("noscript"),this.h()},h:function(){e._bindingGroups[0].push(r),addListener(r,"change",l),r.__value=a=s.id,r.value=r.__value,setAttribute(r,"type","radio"),r.name="url-type",r.className="svelte-pryd0d",n.className="radio"},m:function(e,a){insertNode(n,e,a),appendNode(r,n),r.checked=r.__value===t.shareurl_type,appendNode(i,n),appendNode(o,n),o.insertAdjacentHTML("afterend",c)},p:function(e,t){s=t.tpl,t.each_value,t.tpl_index,r.checked=r.__value===t.shareurl_type,e.plugin_shareurls&&a!==(a=s.id)&&(r.__value=a),r.value=r.__value,e.plugin_shareurls&&c!==(c=s.name)&&(detachAfter(o),o.insertAdjacentHTML("afterend",c))},u:function(){detachAfter(o),detachNode(n)},d:function(){e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(r),1),removeListener(r,"change",l)}}}function create_each_block_1$2(e,t){var n,r,a,i,o,s=t.tpl,c=(t.each_value_1,t.tpl_index_1,s.title);function l(){e.set({embed_type:r.__value})}return{c:function(){n=createElement("label"),r=createElement("input"),i=createText(" "),o=createElement("noscript"),this.h()},h:function(){e._bindingGroups[1].push(r),addListener(r,"change",l),setAttribute(r,"type","radio"),r.__value=a=s.id,r.value=r.__value,r.className="svelte-pryd0d",n.className="radio"},m:function(e,a){insertNode(n,e,a),appendNode(r,n),r.checked=r.__value===t.embed_type,appendNode(i,n),appendNode(o,n),o.insertAdjacentHTML("afterend",c)},p:function(e,t){s=t.tpl,t.each_value_1,t.tpl_index_1,r.checked=r.__value===t.embed_type,e.embed_templates&&a!==(a=s.id)&&(r.__value=a),r.value=r.__value,e.embed_templates&&c!==(c=s.title)&&(detachAfter(o),o.insertAdjacentHTML("afterend",c))},u:function(){detachAfter(o),detachNode(n)},d:function(){e._bindingGroups[1].splice(e._bindingGroups[1].indexOf(r),1),removeListener(r,"change",l)}}}function create_each_block_2(e,t){var n,r,a,i,o,s,c=t.tpl,l=(t.each_value_2,t.tpl_index_2,c.title),d=c.text;return{c:function(){n=createElement("div"),r=createElement("b"),a=createText(l),i=createText(":"),o=createText(" "),s=createElement("noscript")},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,r),appendNode(i,r),appendNode(o,n),appendNode(s,n),s.insertAdjacentHTML("afterend",d)},p:function(e,t){c=t.tpl,t.each_value_2,t.tpl_index_2,e.embed_templates&&l!==(l=c.title)&&(a.data=l),e.embed_templates&&d!==(d=c.text)&&(detachAfter(s),s.insertAdjacentHTML("afterend",d))},u:function(){detachAfter(s),detachNode(n)},d:noop}}function create_if_block_11(e,t){var n;return{c:function(){n=createElement("p")},m:function(e,r){insertNode(n,e,r),n.innerHTML=t.exportIntro},p:function(e,t){e.exportIntro&&(n.innerHTML=t.exportIntro)},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_each_block_3(e,t){var n,r=t.action,a=(t.each_value_3,t.action_index,r&&create_if_block_12(e,t));return{c:function(){a&&a.c(),n=createComment()},m:function(e,t){a&&a.m(e,t),insertNode(n,e,t)},p:function(t,i){r=i.action,i.each_value_3,i.action_index,r?a?a.p(t,i):((a=create_if_block_12(e,i)).c(),a.m(n.parentNode,n)):a&&(a.u(),a.d(),a=null)},u:function(){a&&a.u(),detachNode(n)},d:function(){a&&a.d()}}}function create_if_block_13(e,t){var n,r,a,i=t.action,o=(t.each_value_3,t.action_index,i.banner.text);return{c:function(){n=createElement("div"),r=createText(o),this.h()},h:function(){n.className="banner",n.style.cssText=a=i.banner.style},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:function(e,t){i=t.action,t.each_value_3,t.action_index,e.sortedChartActions&&o!==(o=i.banner.text)&&(r.data=o),e.sortedChartActions&&a!==(a=i.banner.style)&&(n.style.cssText=a)},u:function(){detachNode(n)},d:noop}}function create_if_block_12(e,t){var n,r,a,i,o,s,c,l,d=t.action,u=(t.each_value_3,t.action_index,d.title),p=d.banner&&"FALSE"!=d.banner.text&&"-"!=d.banner.text&&create_if_block_13(e,t);return{c:function(){n=createElement("li"),r=createElement("a"),a=createElement("i"),o=createElement("span"),c=createText("\n                "),p&&p.c(),this.h()},h:function(){a.className=i="fa fa-"+d.icon+" svelte-pryd0d",o.className="title svelte-pryd0d",addListener(r,"click",click_handler$2),setAttribute(r,"role","button"),r.href=s=d.url?d.url:"#"+d.id,r._svelte={component:e,each_value_3:t.each_value_3,action_index:t.action_index},n.className=l="action action-"+d.id+" "+(d.class||"")+" "+(d.id==t.active_action?"active":"")+" svelte-pryd0d"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,r),appendNode(o,r),o.innerHTML=u,appendNode(c,n),p&&p.m(n,null)},p:function(t,c){d=c.action,c.each_value_3,c.action_index,t.sortedChartActions&&i!==(i="fa fa-"+d.icon+" svelte-pryd0d")&&(a.className=i),t.sortedChartActions&&u!==(u=d.title)&&(o.innerHTML=u),t.sortedChartActions&&s!==(s=d.url?d.url:"#"+d.id)&&(r.href=s),r._svelte.each_value_3=c.each_value_3,r._svelte.action_index=c.action_index,d.banner&&"FALSE"!=d.banner.text&&"-"!=d.banner.text?p?p.p(t,c):((p=create_if_block_13(e,c)).c(),p.m(n,null)):p&&(p.u(),p.d(),p=null),(t.sortedChartActions||t.active_action)&&l!==(l="action action-"+d.id+" "+(d.class||"")+" "+(d.id==c.active_action?"active":"")+" svelte-pryd0d")&&(n.className=l)},u:function(){o.innerHTML="",detachNode(n),p&&p.u()},d:function(){removeListener(r,"click",click_handler$2),p&&p.d()}}}function click_handler$2(e){var t=this._svelte.component,n=this._svelte.each_value_3[this._svelte.action_index];t.select(n,e)}function Publish(e){init(this,e),this.refs={},this._state=assign(assign(this.store._init(["id","publicUrl","metadata","actions"]),data_1()),e.data),this.store._add(this,["id","publicUrl","metadata","actions"]),this._recompute({shareurl_type:1,$id:1,$publicUrl:1,plugin_shareurls:1,published:1,embed_type:1,$metadata:1,chartActions:1,$actions:1},this._state),this._bindingGroups=[[],[]],this._handlers.state=[onstate],this._handlers.destroy=[removeFromStore],this._slotted=e.slots||{};var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this.slots={},this._fragment=create_main_fragment$12(this,this._state),this.root._oncreate.push(function(){var e={shareurl_type:1,$id:1,$publicUrl:1,plugin_shareurls:1,published:1,embed_type:1,$metadata:1,chartActions:1,$actions:1,publishHed:1,publishIntro:1,publishing:1,needs_republish:1,progress:1,publish_error:1,shareUrl:1,embed_templates:1,embedCode:1,copy_success:1,beforeExport:1,exportHed:1,exportIntro:1,sortedChartActions:1,active_action:1,Action:1};onstate.call(t,{changed:e,current:t._state}),oncreate$3.call(t),t.fire("update",{changed:e,current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}assign(Publish.prototype,proto),assign(Publish.prototype,methods$7),Publish.prototype._recompute=function(e,t){(e.shareurl_type||e.$id||e.$publicUrl||e.plugin_shareurls||e.published)&&this._differs(t.shareUrl,t.shareUrl=shareUrl(t))&&(e.shareUrl=!0),(e.embed_type||e.$metadata||e.$publicUrl)&&this._differs(t.embedCode,t.embedCode=embedCode(t))&&(e.embedCode=!0),(e.chartActions||e.$actions)&&this._differs(t.sortedChartActions,t.sortedChartActions=sortedChartActions(t))&&(e.sortedChartActions=!0)};var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var core=createCommonjsModule(function(e,t){var n;e.exports=(n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},a=r.lib={},i=a.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=a.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,a=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<a;i++){var o=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=o<<24-(r+i)%4*8}else for(var i=0;i<a;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],a=function(t){var t=t,n=987654321,r=4294967295;return function(){var a=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return a/=4294967296,(a+=.5)*(e.random()>.5?1:-1)}},i=0;i<t;i+=4){var s=a(4294967296*(n||e.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new o.init(r,t)}}),s=r.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var i=t[a>>>2]>>>24-a%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new o.init(n,t/2)}},l=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var i=t[a>>>2]>>>24-a%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new o.init(n,t)}},d=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},u=a.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,i=this.blockSize,s=4*i,c=a/s,l=(c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0))*i,d=e.min(4*l,a);if(l){for(var u=0;u<l;u+=i)this._doProcessBlock(r,u);var p=r.splice(0,l);n.sigBytes-=d}return new o.init(p,d)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(a.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math),n)}),x64Core=createCommonjsModule(function(e,t){var n,r,a,i,o,s;e.exports=(a=(r=n=core).lib,i=a.Base,o=a.WordArray,(s=r.x64={}).Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var a=e[r];n.push(a.high),n.push(a.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}}),n)}),libTypedarrays=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],a=0;a<n;a++)r[a>>>2]|=e[a]<<24-a%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e}}(),n.lib.WordArray)}),encUtf16=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib.WordArray,r=e.enc;function a(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a+=2){var i=t[a>>>2]>>>16-a%4*8&65535;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var n=e.length,r=[],a=0;a<n;a++)r[a>>>1]|=e.charCodeAt(a)<<16-a%2*16;return t.create(r,2*n)}},r.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var o=a(t[i>>>2]>>>16-i%4*8&65535);r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=a(e.charCodeAt(i)<<16-i%2*16);return t.create(r,2*n)}}}(),n.enc.Utf16)}),encBase64=createCommonjsModule(function(e,t){var n,r,a;e.exports=(a=(r=n=core).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var a=[],i=0;i<n;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)a.push(r.charAt(o>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;a.length%4;)a.push(c);return a.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<n.length;i++)r[n.charCodeAt(i)]=i}var o=n.charAt(64);if(o){var s=e.indexOf(o);-1!==s&&(t=s)}return function(e,t,n){for(var r=[],i=0,o=0;o<t;o++)if(o%4){var s=n[e.charCodeAt(o-1)]<<o%4*2,c=n[e.charCodeAt(o)]>>>6-o%4*2;r[i>>>2]|=(s|c)<<24-i%4*8,i++}return a.create(r,i)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)}),md5=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(e){var t=n,r=t.lib,a=r.WordArray,i=r.Hasher,o=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=o.MD5=i.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,a=e[r];e[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var i=this._hash.words,o=e[t+0],c=e[t+1],h=e[t+2],f=e[t+3],_=e[t+4],m=e[t+5],v=e[t+6],g=e[t+7],b=e[t+8],N=e[t+9],y=e[t+10],x=e[t+11],w=e[t+12],k=e[t+13],E=e[t+14],M=e[t+15],T=i[0],Y=i[1],S=i[2],$=i[3];Y=p(Y=p(Y=p(Y=p(Y=u(Y=u(Y=u(Y=u(Y=d(Y=d(Y=d(Y=d(Y=l(Y=l(Y=l(Y=l(Y,S=l(S,$=l($,T=l(T,Y,S,$,o,7,s[0]),Y,S,c,12,s[1]),T,Y,h,17,s[2]),$,T,f,22,s[3]),S=l(S,$=l($,T=l(T,Y,S,$,_,7,s[4]),Y,S,m,12,s[5]),T,Y,v,17,s[6]),$,T,g,22,s[7]),S=l(S,$=l($,T=l(T,Y,S,$,b,7,s[8]),Y,S,N,12,s[9]),T,Y,y,17,s[10]),$,T,x,22,s[11]),S=l(S,$=l($,T=l(T,Y,S,$,w,7,s[12]),Y,S,k,12,s[13]),T,Y,E,17,s[14]),$,T,M,22,s[15]),S=d(S,$=d($,T=d(T,Y,S,$,c,5,s[16]),Y,S,v,9,s[17]),T,Y,x,14,s[18]),$,T,o,20,s[19]),S=d(S,$=d($,T=d(T,Y,S,$,m,5,s[20]),Y,S,y,9,s[21]),T,Y,M,14,s[22]),$,T,_,20,s[23]),S=d(S,$=d($,T=d(T,Y,S,$,N,5,s[24]),Y,S,E,9,s[25]),T,Y,f,14,s[26]),$,T,b,20,s[27]),S=d(S,$=d($,T=d(T,Y,S,$,k,5,s[28]),Y,S,h,9,s[29]),T,Y,g,14,s[30]),$,T,w,20,s[31]),S=u(S,$=u($,T=u(T,Y,S,$,m,4,s[32]),Y,S,b,11,s[33]),T,Y,x,16,s[34]),$,T,E,23,s[35]),S=u(S,$=u($,T=u(T,Y,S,$,c,4,s[36]),Y,S,_,11,s[37]),T,Y,g,16,s[38]),$,T,y,23,s[39]),S=u(S,$=u($,T=u(T,Y,S,$,k,4,s[40]),Y,S,o,11,s[41]),T,Y,f,16,s[42]),$,T,v,23,s[43]),S=u(S,$=u($,T=u(T,Y,S,$,N,4,s[44]),Y,S,w,11,s[45]),T,Y,M,16,s[46]),$,T,h,23,s[47]),S=p(S,$=p($,T=p(T,Y,S,$,o,6,s[48]),Y,S,g,10,s[49]),T,Y,E,15,s[50]),$,T,m,21,s[51]),S=p(S,$=p($,T=p(T,Y,S,$,w,6,s[52]),Y,S,f,10,s[53]),T,Y,y,15,s[54]),$,T,c,21,s[55]),S=p(S,$=p($,T=p(T,Y,S,$,b,6,s[56]),Y,S,M,10,s[57]),T,Y,v,15,s[58]),$,T,k,21,s[59]),S=p(S,$=p($,T=p(T,Y,S,$,_,6,s[60]),Y,S,x,10,s[61]),T,Y,h,15,s[62]),$,T,N,21,s[63]),i[0]=i[0]+T|0,i[1]=i[1]+Y|0,i[2]=i[2]+S|0,i[3]=i[3]+$|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;n[a>>>5]|=128<<24-a%32;var i=e.floor(r/4294967296),o=r;n[15+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(a+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var d=c[l];c[l]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,a,i,o){var s=e+(t&n|~t&r)+a+o;return(s<<i|s>>>32-i)+t}function d(e,t,n,r,a,i,o){var s=e+(t&r|n&~r)+a+o;return(s<<i|s>>>32-i)+t}function u(e,t,n,r,a,i,o){var s=e+(t^n^r)+a+o;return(s<<i|s>>>32-i)+t}function p(e,t,n,r,a,i,o){var s=e+(n^(t|~r))+a+o;return(s<<i|s>>>32-i)+t}t.MD5=i._createHelper(c),t.HmacMD5=i._createHmacHelper(c)}(Math),n.MD5)}),sha1=createCommonjsModule(function(e,t){var n,r,a,i,o,s,c;e.exports=(a=(r=n=core).lib,i=a.WordArray,o=a.Hasher,s=[],c=r.algo.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],i=n[2],o=n[3],c=n[4],l=0;l<80;l++){if(l<16)s[l]=0|e[t+l];else{var d=s[l-3]^s[l-8]^s[l-14]^s[l-16];s[l]=d<<1|d>>>31}var u=(r<<5|r>>>27)+c+s[l];u+=l<20?1518500249+(a&i|~a&o):l<40?1859775393+(a^i^o):l<60?(a&i|a&o|i&o)-1894007588:(a^i^o)-899497514,c=o,o=i,i=a<<30|a>>>2,a=r,r=u}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+i|0,n[3]=n[3]+o|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=o._createHelper(c),r.HmacSHA1=o._createHmacHelper(c),n.SHA1)}),sha256=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(e){var t=n,r=t.lib,a=r.WordArray,i=r.Hasher,o=t.algo,s=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,a=0;a<64;)t(r)&&(a<8&&(s[a]=n(e.pow(r,.5))),c[a]=n(e.pow(r,1/3)),a++),r++}();var l=[],d=o.SHA256=i.extend({_doReset:function(){this._hash=new a.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],d=n[5],u=n[6],p=n[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var f=l[h-15],_=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,m=l[h-2],v=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;l[h]=_+l[h-7]+v+l[h-16]}var g=r&a^r&i^a&i,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),N=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&d^~s&u)+c[h]+l[h];p=u,u=d,d=s,s=o+N|0,o=i,i=a,a=r,r=N+(b+g)|0}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+i|0,n[3]=n[3]+o|0,n[4]=n[4]+s|0,n[5]=n[5]+d|0,n[6]=n[6]+u|0,n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;return n[a>>>5]|=128<<24-a%32,n[14+(a+64>>>9<<4)]=e.floor(r/4294967296),n[15+(a+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(d),t.HmacSHA256=i._createHmacHelper(d)}(Math),n.SHA256)}),sha224=createCommonjsModule(function(e,t){var n,r,a,i,o,s;e.exports=(a=(r=n=core).lib.WordArray,i=r.algo,o=i.SHA256,s=i.SHA224=o.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}}),r.SHA224=o._createHelper(s),r.HmacSHA224=o._createHmacHelper(s),n.SHA224)}),sha512=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib.Hasher,r=e.x64,a=r.Word,i=r.WordArray,o=e.algo;function s(){return a.create.apply(a,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=s()}();var d=o.SHA512=t.extend({_doReset:function(){this._hash=new i.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],i=n[2],o=n[3],s=n[4],d=n[5],u=n[6],p=n[7],h=r.high,f=r.low,_=a.high,m=a.low,v=i.high,g=i.low,b=o.high,N=o.low,y=s.high,x=s.low,w=d.high,k=d.low,E=u.high,M=u.low,T=p.high,Y=p.low,S=h,$=f,A=_,D=m,C=v,L=g,H=b,B=N,j=y,P=x,O=w,z=k,U=E,I=M,F=T,R=Y,W=0;W<80;W++){var V=l[W];if(W<16)var G=V.high=0|e[t+2*W],q=V.low=0|e[t+2*W+1];else{var J=l[W-15],K=J.high,X=J.low,Q=(K>>>1|X<<31)^(K>>>8|X<<24)^K>>>7,Z=(X>>>1|K<<31)^(X>>>8|K<<24)^(X>>>7|K<<25),ee=l[W-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ae=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ie=l[W-7],oe=ie.high,se=ie.low,ce=l[W-16],le=ce.high,de=ce.low;G=(G=(G=Q+oe+((q=Z+se)>>>0<Z>>>0?1:0))+re+((q+=ae)>>>0<ae>>>0?1:0))+le+((q+=de)>>>0<de>>>0?1:0),V.high=G,V.low=q}var ue,pe=j&O^~j&U,he=P&z^~P&I,fe=S&A^S&C^A&C,_e=$&D^$&L^D&L,me=(S>>>28|$<<4)^(S<<30|$>>>2)^(S<<25|$>>>7),ve=($>>>28|S<<4)^($<<30|S>>>2)^($<<25|S>>>7),ge=(j>>>14|P<<18)^(j>>>18|P<<14)^(j<<23|P>>>9),be=(P>>>14|j<<18)^(P>>>18|j<<14)^(P<<23|j>>>9),Ne=c[W],ye=Ne.high,xe=Ne.low,we=F+ge+((ue=R+be)>>>0<R>>>0?1:0),ke=ve+_e;F=U,R=I,U=O,I=z,O=j,z=P,j=H+(we=(we=(we=we+pe+((ue+=he)>>>0<he>>>0?1:0))+ye+((ue+=xe)>>>0<xe>>>0?1:0))+G+((ue+=q)>>>0<q>>>0?1:0))+((P=B+ue|0)>>>0<B>>>0?1:0)|0,H=C,B=L,C=A,L=D,A=S,D=$,S=we+(me+fe+(ke>>>0<ve>>>0?1:0))+(($=ue+ke|0)>>>0<ue>>>0?1:0)|0}f=r.low=f+$,r.high=h+S+(f>>>0<$>>>0?1:0),m=a.low=m+D,a.high=_+A+(m>>>0<D>>>0?1:0),g=i.low=g+L,i.high=v+C+(g>>>0<L>>>0?1:0),N=o.low=N+B,o.high=b+H+(N>>>0<B>>>0?1:0),x=s.low=x+P,s.high=y+j+(x>>>0<P>>>0?1:0),k=d.low=k+z,d.high=w+O+(k>>>0<z>>>0?1:0),M=u.low=M+I,u.high=E+U+(M>>>0<I>>>0?1:0),Y=p.low=Y+R,p.high=T+F+(Y>>>0<R>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(d),e.HmacSHA512=t._createHmacHelper(d)}(),n.SHA512)}),sha384=createCommonjsModule(function(e,t){var n,r,a,i,o,s,c,l;e.exports=(a=(r=n=core).x64,i=a.Word,o=a.WordArray,s=r.algo,c=s.SHA512,l=s.SHA384=c.extend({_doReset:function(){this._hash=new o.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),r.SHA384=c._createHelper(l),r.HmacSHA384=c._createHmacHelper(l),n.SHA384)}),sha3=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(e){var t=n,r=t.lib,a=r.WordArray,i=r.Hasher,o=t.x64.Word,s=t.algo,c=[],l=[],d=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var a=1,i=0;i<24;i++){for(var s=0,u=0,p=0;p<7;p++){if(1&a){var h=(1<<p)-1;h<32?u^=1<<h:s^=1<<h-32}128&a?a=a<<1^113:a<<=1}d[i]=o.create(s,u)}}();var u=[];!function(){for(var e=0;e<25;e++)u[e]=o.create()}();var p=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new o.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,a=0;a<r;a++){var i=e[t+2*a],o=e[t+2*a+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(Y=n[a]).high^=o,Y.low^=i}for(var s=0;s<24;s++){for(var p=0;p<5;p++){for(var h=0,f=0,_=0;_<5;_++)h^=(Y=n[p+5*_]).high,f^=Y.low;var m=u[p];m.high=h,m.low=f}for(p=0;p<5;p++){var v=u[(p+4)%5],g=u[(p+1)%5],b=g.high,N=g.low;for(h=v.high^(b<<1|N>>>31),f=v.low^(N<<1|b>>>31),_=0;_<5;_++)(Y=n[p+5*_]).high^=h,Y.low^=f}for(var y=1;y<25;y++){var x=(Y=n[y]).high,w=Y.low,k=c[y];k<32?(h=x<<k|w>>>32-k,f=w<<k|x>>>32-k):(h=w<<k-32|x>>>64-k,f=x<<k-32|w>>>64-k);var E=u[l[y]];E.high=h,E.low=f}var M=u[0],T=n[0];for(M.high=T.high,M.low=T.low,p=0;p<5;p++)for(_=0;_<5;_++){var Y=n[y=p+5*_],S=u[y],$=u[(p+1)%5+5*_],A=u[(p+2)%5+5*_];Y.high=S.high^~$.high&A.high,Y.low=S.low^~$.low&A.low}Y=n[0];var D=d[s];Y.high^=D.high,Y.low^=D.low}},_doFinalize:function(){var t=this._data,n=t.words,r=(this._nDataBytes,8*t.sigBytes),i=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(e.ceil((r+1)/i)*i>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var o=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],d=0;d<c;d++){var u=o[d],p=u.high,h=u.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),l.push(h),l.push(p)}return new a.init(l,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=i._createHelper(p),t.HmacSHA3=i._createHmacHelper(p)}(Math),n.SHA3)}),ripemd160=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(e){var t=n,r=t.lib,a=r.WordArray,i=r.Hasher,o=t.algo,s=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=a.create([0,1518500249,1859775393,2400959708,2840853838]),p=a.create([1352829926,1548603684,1836072691,2053994217,0]),h=o.RIPEMD160=i.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,a=e[r];e[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var i,o,h,N,y,x,w,k,E,M,T,Y=this._hash.words,S=u.words,$=p.words,A=s.words,D=c.words,C=l.words,L=d.words;for(x=i=Y[0],w=o=Y[1],k=h=Y[2],E=N=Y[3],M=y=Y[4],n=0;n<80;n+=1)T=i+e[t+A[n]]|0,T+=n<16?f(o,h,N)+S[0]:n<32?_(o,h,N)+S[1]:n<48?m(o,h,N)+S[2]:n<64?v(o,h,N)+S[3]:g(o,h,N)+S[4],T=(T=b(T|=0,C[n]))+y|0,i=y,y=N,N=b(h,10),h=o,o=T,T=x+e[t+D[n]]|0,T+=n<16?g(w,k,E)+$[0]:n<32?v(w,k,E)+$[1]:n<48?m(w,k,E)+$[2]:n<64?_(w,k,E)+$[3]:f(w,k,E)+$[4],T=(T=b(T|=0,L[n]))+M|0,x=M,M=E,E=b(k,10),k=w,w=T;T=Y[1]+h+E|0,Y[1]=Y[2]+N+M|0,Y[2]=Y[3]+y+x|0,Y[3]=Y[4]+i+w|0,Y[4]=Y[0]+o+k|0,Y[0]=T},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,i=a.words,o=0;o<5;o++){var s=i[o];i[o]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,n){return e^t^n}function _(e,t,n){return e&t|~e&n}function m(e,t,n){return(e|~t)^n}function v(e,t,n){return e&n|t&~n}function g(e,t,n){return e^(t|~n)}function b(e,t){return e<<t|e>>>32-t}t.RIPEMD160=i._createHelper(h),t.HmacRIPEMD160=i._createHmacHelper(h)}(Math),n.RIPEMD160)}),hmac=createCommonjsModule(function(e,t){var n,r,a,i,o,s;e.exports=(r=(n=core).lib,a=r.Base,i=n.enc,o=i.Utf8,s=n.algo,void(s.HMAC=a.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),i=this._iKey=t.clone(),s=a.words,c=i.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;a.sigBytes=i.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);t.reset();var r=t.finalize(this._oKey.clone().concat(n));return r}})))}),pbkdf2=createCommonjsModule(function(e,t){var n,r,a,i,o,s,c,l,d;e.exports=(a=(r=n=core).lib,i=a.Base,o=a.WordArray,s=r.algo,c=s.SHA1,l=s.HMAC,d=s.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=l.create(n.hasher,e),a=o.create(),i=o.create([1]),s=a.words,c=i.words,d=n.keySize,u=n.iterations;s.length<d;){var p=r.update(t).finalize(i);r.reset();for(var h=p.words,f=h.length,_=p,m=1;m<u;m++){_=r.finalize(_),r.reset();for(var v=_.words,g=0;g<f;g++)h[g]^=v[g]}a.concat(p),c[0]++}return a.sigBytes=4*d,a}}),r.PBKDF2=function(e,t,n){return d.create(n).compute(e,t)},n.PBKDF2)}),evpkdf=createCommonjsModule(function(e,t){var n,r,a,i,o,s,c,l;e.exports=(a=(r=n=core).lib,i=a.Base,o=a.WordArray,s=r.algo,c=s.MD5,l=s.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),a=o.create(),i=a.words,s=n.keySize,c=n.iterations;i.length<s;){l&&r.update(l);var l=r.update(e).finalize(t);r.reset();for(var d=1;d<c;d++)l=r.finalize(l),r.reset();a.concat(l)}return a.sigBytes=4*s,a}}),r.EvpKDF=function(e,t,n){return l.create(n).compute(e,t)},n.EvpKDF)}),cipherCore=createCommonjsModule(function(e,t){var n;e.exports=void((n=core).lib.Cipher||function(e){var t=n,r=t.lib,a=r.Base,i=r.WordArray,o=r.BufferedBlockAlgorithm,s=t.enc,c=(s.Utf8,s.Base64),l=t.algo,d=l.EvpKDF,u=r.Cipher=o.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?w:N}return function(t){return{encrypt:function(n,r,a){return e(r).encrypt(t,n,r,a)},decrypt:function(n,r,a){return e(r).decrypt(t,n,r,a)}}}}()}),p=(r.StreamCipher=u.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),t.mode={}),h=r.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=p.CBC=function(){var t=h.extend();function n(t,n,r){var a=this._iv;if(a){var i=a;this._iv=e}else var i=this._prevBlock;for(var o=0;o<r;o++)t[n+o]^=i[o]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,a=r.blockSize;n.call(this,e,t,a),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+a)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,a=r.blockSize,i=e.slice(t,t+a);r.decryptBlock(e,t),n.call(this,e,t,a),this._prevBlock=i}}),t}(),_=t.pad={},m=_.Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,a=r<<24|r<<16|r<<8|r,o=[],s=0;s<r;s+=4)o.push(a);var c=i.create(o,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:m}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{var r=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(n,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),r.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=t.format={},b=g.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var r=i.create([1398893684,1701076831]).concat(n).concat(t);else var r=t;return r.toString(c)},parse:function(e){var t=c.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var r=i.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return v.create({ciphertext:t,salt:r})}},N=r.SerializableCipher=a.extend({cfg:a.extend({format:b}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var a=e.createEncryptor(n,r),i=a.finalize(t),o=a.cfg;return v.create({ciphertext:i,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var a=e.createDecryptor(n,r).finalize(t.ciphertext);return a},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=t.kdf={},x=y.OpenSSL={execute:function(e,t,n,r){r||(r=i.random(8));var a=d.create({keySize:t+n}).compute(e,r),o=i.create(a.words.slice(t),4*n);return a.sigBytes=4*t,v.create({key:a,iv:o,salt:r})}},w=r.PasswordBasedCipher=N.extend({cfg:N.cfg.extend({kdf:x}),encrypt:function(e,t,n,r){var a=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=a.iv;var i=N.encrypt.call(this,e,t,a.key,r);return i.mixIn(a),i},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var a=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);r.iv=a.iv;var i=N.decrypt.call(this,e,t,a.key,r);return i}})}())}),modeCfb=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,n,r){var a=this._iv;if(a){var i=a.slice(0);this._iv=void 0}else i=this._prevBlock;r.encryptBlock(i,0);for(var o=0;o<n;o++)e[t+o]^=i[o]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,a=r.blockSize;t.call(this,e,n,a,r),this._prevBlock=e.slice(n,n+a)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,a=r.blockSize,i=e.slice(n,n+a);t.call(this,e,n,a,r),this._prevBlock=i}}),e}(),n.mode.CFB)}),modeCtr=createCommonjsModule(function(e,t){var n,r,a;e.exports=((n=core).mode.CTR=(r=n.lib.BlockCipherMode.extend(),a=r.Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=this._iv,i=this._counter;a&&(i=this._counter=a.slice(0),this._iv=void 0);var o=i.slice(0);n.encryptBlock(o,0),i[r-1]=i[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=o[s]}}),r.Decryptor=a,r),n.mode.CTR)}),modeCtrGladman=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}var r=e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,a=r.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(o);var s=o.slice(0);r.encryptBlock(s,0);for(var c=0;c<a;c++)e[n+c]^=s[c]}});return e.Decryptor=r,e}(),n.mode.CTRGladman)}),modeOfb=createCommonjsModule(function(e,t){var n,r,a;e.exports=((n=core).mode.OFB=(r=n.lib.BlockCipherMode.extend(),a=r.Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=this._iv,i=this._keystream;a&&(i=this._keystream=a.slice(0),this._iv=void 0),n.encryptBlock(i,0);for(var o=0;o<r;o++)e[t+o]^=i[o]}}),r.Decryptor=a,r),n.mode.OFB)}),modeEcb=createCommonjsModule(function(e,t){var n,r;e.exports=((n=core).mode.ECB=((r=n.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),r.Decryptor=r.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),r),n.mode.ECB)}),padAnsix923=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,a=r-n%r,i=n+a-1;e.clamp(),e.words[i>>>2]|=a<<24-i%4*8,e.sigBytes+=a},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Ansix923)}),padIso10126=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.Iso10126={pad:function(e,t){var r=4*t,a=r-e.sigBytes%r;e.concat(n.lib.WordArray.random(a-1)).concat(n.lib.WordArray.create([a<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)}),padIso97971=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)}),padZeropadding=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},n.pad.ZeroPadding)}),padNopadding=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)}),formatHex=createCommonjsModule(function(e,t){var n,r,a,i;e.exports=(a=(r=n=core).lib.CipherParams,i=r.enc.Hex,r.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return a.create({ciphertext:t})}},n.format.Hex)}),aes=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib.BlockCipher,r=e.algo,a=[],i=[],o=[],s=[],c=[],l=[],d=[],u=[],p=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var f=r^r<<1^r<<2^r<<3^r<<4;f=f>>>8^255&f^99,a[n]=f,i[f]=n;var _=e[n],m=e[_],v=e[m],g=257*e[f]^16843008*f;o[n]=g<<24|g>>>8,s[n]=g<<16|g>>>16,c[n]=g<<8|g>>>24,l[n]=g,g=16843009*v^65537*m^257*_^16843008*n,d[f]=g<<24|g>>>8,u[f]=g<<16|g>>>16,p[f]=g<<8|g>>>24,h[f]=g,n?(n=_^e[e[e[v^_]]],r^=e[e[r]]):n=r=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],_=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],o=0;o<r;o++)if(o<n)i[o]=t[o];else{var s=i[o-1];o%n?n>6&&o%n==4&&(s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s]):(s=a[(s=s<<8|s>>>24)>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s],s^=f[o/n|0]<<24),i[o]=i[o-n]^s}for(var c=this._invKeySchedule=[],l=0;l<r;l++)o=r-l,s=l%4?i[o]:i[o-4],c[l]=l<4||o<=4?s:d[a[s>>>24]]^u[a[s>>>16&255]]^p[a[s>>>8&255]]^h[a[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,c,l,a)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,d,u,p,h,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,a,i,o,s){for(var c=this._nRounds,l=e[t]^n[0],d=e[t+1]^n[1],u=e[t+2]^n[2],p=e[t+3]^n[3],h=4,f=1;f<c;f++){var _=r[l>>>24]^a[d>>>16&255]^i[u>>>8&255]^o[255&p]^n[h++],m=r[d>>>24]^a[u>>>16&255]^i[p>>>8&255]^o[255&l]^n[h++],v=r[u>>>24]^a[p>>>16&255]^i[l>>>8&255]^o[255&d]^n[h++],g=r[p>>>24]^a[l>>>16&255]^i[d>>>8&255]^o[255&u]^n[h++];l=_,d=m,u=v,p=g}_=(s[l>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&p])^n[h++],m=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[p>>>8&255]<<8|s[255&l])^n[h++],v=(s[u>>>24]<<24|s[p>>>16&255]<<16|s[l>>>8&255]<<8|s[255&d])^n[h++],g=(s[p>>>24]<<24|s[l>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[h++],e[t]=_,e[t+1]=m,e[t+2]=v,e[t+3]=g},keySize:8});e.AES=t._createHelper(_)}(),n.AES)}),tripledes=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib,r=t.WordArray,a=t.BlockCipher,i=e.algo,o=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=i.DES=a.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=o[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var a=this._subKeys=[],i=0;i<16;i++){var l=a[i]=[],d=c[i];for(n=0;n<24;n++)l[n/6|0]|=t[(s[n]-1+d)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(s[n+24]-1+d)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;n<7;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var u=this._invSubKeys=[];for(n=0;n<16;n++)u[n]=a[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],p.call(this,4,252645135),p.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),p.call(this,1,1431655765);for(var r=0;r<16;r++){for(var a=n[r],i=this._lBlock,o=this._rBlock,s=0,c=0;c<8;c++)s|=l[c][((o^a[c])&d[c])>>>0];this._lBlock=o,this._rBlock=i^s}var u=this._lBlock;this._lBlock=this._rBlock,this._rBlock=u,p.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function p(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function h(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=a._createHelper(u);var f=i.TripleDES=a.extend({_doReset:function(){var e=this._key.words;this._des1=u.createEncryptor(r.create(e.slice(0,2))),this._des2=u.createEncryptor(r.create(e.slice(2,4))),this._des3=u.createEncryptor(r.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=a._createHelper(f)}(),n.TripleDES)}),rc4=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib.StreamCipher,r=e.algo,a=r.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],a=0;a<256;a++)r[a]=a;a=0;for(var i=0;a<256;a++){var o=a%n,s=t[o>>>2]>>>24-o%4*8&255;i=(i+r[a]+s)%256;var c=r[a];r[a]=r[i],r[i]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,n=this._j,r=0,a=0;a<4;a++){n=(n+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[n],e[n]=i,r|=e[(e[t]+e[n])%256]<<24-8*a}return this._i=t,this._j=n,r}e.RC4=t._createHelper(a);var o=r.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});e.RC4Drop=t._createHelper(o)}(),n.RC4)}),rabbit=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib.StreamCipher,r=[],a=[],i=[],o=e.algo.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)s.call(this);for(n=0;n<8;n++)a[n]^=r[n+4&7];if(t){var i=t.words,o=i[0],c=i[1],l=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),d=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),u=l>>>16|4294901760&d,p=d<<16|65535&l;for(a[0]^=l,a[1]^=u,a[2]^=d,a[3]^=p,a[4]^=l,a[5]^=u,a[6]^=d,a[7]^=p,n=0;n<4;n++)s.call(this)}},_doProcessBlock:function(e,t){var n=this._X;s.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var a=0;a<4;a++)r[a]=16711935&(r[a]<<8|r[a]>>>24)|4278255360&(r[a]<<24|r[a]>>>8),e[t+a]^=r[a]},blockSize:4,ivSize:2});function s(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,s=r>>>16,c=((o*o>>>17)+o*s>>>15)+s*s,l=((4294901760&r)*r|0)+((65535&r)*r|0);i[n]=c^l}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}e.Rabbit=t._createHelper(o)}(),n.Rabbit)}),rabbitLegacy=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib.StreamCipher,r=[],a=[],i=[],o=e.algo.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)s.call(this);for(a=0;a<8;a++)r[a]^=n[a+4&7];if(t){var i=t.words,o=i[0],c=i[1],l=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),d=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),u=l>>>16|4294901760&d,p=d<<16|65535&l;for(r[0]^=l,r[1]^=u,r[2]^=d,r[3]^=p,r[4]^=l,r[5]^=u,r[6]^=d,r[7]^=p,a=0;a<4;a++)s.call(this)}},_doProcessBlock:function(e,t){var n=this._X;s.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var a=0;a<4;a++)r[a]=16711935&(r[a]<<8|r[a]>>>24)|4278255360&(r[a]<<24|r[a]>>>8),e[t+a]^=r[a]},blockSize:4,ivSize:2});function s(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,s=r>>>16,c=((o*o>>>17)+o*s>>>15)+s*s,l=((4294901760&r)*r|0)+((65535&r)*r|0);i[n]=c^l}e[0]=i[0]+(i[7]<<16|i[7]>>>16)+(i[6]<<16|i[6]>>>16)|0,e[1]=i[1]+(i[0]<<8|i[0]>>>24)+i[7]|0,e[2]=i[2]+(i[1]<<16|i[1]>>>16)+(i[0]<<16|i[0]>>>16)|0,e[3]=i[3]+(i[2]<<8|i[2]>>>24)+i[1]|0,e[4]=i[4]+(i[3]<<16|i[3]>>>16)+(i[2]<<16|i[2]>>>16)|0,e[5]=i[5]+(i[4]<<8|i[4]>>>24)+i[3]|0,e[6]=i[6]+(i[5]<<16|i[5]>>>16)+(i[4]<<16|i[4]>>>16)|0,e[7]=i[7]+(i[6]<<8|i[6]>>>24)+i[5]|0}e.RabbitLegacy=t._createHelper(o)}(),n.RabbitLegacy)}),cryptoJs=createCommonjsModule(function(e,t){e.exports=core});function emailError(e){var t=e.remoteEmailError;return t||""}function passwordError(e){var t=e.password,n=e.remotePasswordError;return n||(t&&(!t||t.length<6)?"Password must be at least six characters":"")}function password2Error(e){var t=e.passwordError,n=e.password,r=e.password2;return t?"":r!=n?"The two passwords must be identical":""}function data$11(){return{successMsg:"",errorMsg:"",email:"",password:"",password2:"",remoteEmailError:"",remotePasswordError:"",keeplogin:!0,loginForm:!0,resetPassword:!1,alternativeSignIns:[]}}var methods$8={login:function(e,t,n){var r=this,a=this.encryptPassword(t);postJSON("/api/auth/login",JSON.stringify({email:e,pwhash:a,keeplogin:n}),function(e){"ok"==e.status?r.store.set({user:e.data}):console.log("error",e)})},signUp:function(){},reset:function(){this.set({successMsg:"",errorMsg:"",remotePasswordError:"",remoteEmailError:""})},sendNewPassword:function(e){var t=this;if(!e)return this.set({errorMsg:"email must not be empty"});this.reset(),postJSON("/api/account/reset-password",JSON.stringify({email:e}),function(e){"ok"==e.status?t.set({resetPassword:!1,successMsg:e.data}):t.set({resetPassword:!1,remoteEmailError:e.message})})},toSignUp:function(e,t){e.preventDefault(),this.set({loginForm:!t})},resetPassword:function(e,t){e.preventDefault(),this.set({resetPassword:t})},encryptPassword:function(e){var t=window.dw.backend.__auth_salt;return cryptoJs.HmacSHA256(e,t).toString()}};function oncreate$4(){var e=this;getJSON("/api/auth/alternative-signins",function(t){"ok"==t.status&&e.set({alternativeSignIns:t.data})})}function create_main_fragment$13(e,t){var n;function r(e){return e.loginForm?create_if_block$9:create_if_block_9$1}var a=r(t),i=a(e,t);return{c:function(){i.c(),n=createComment()},m:function(e,t){i.m(e,t),insertNode(n,e,t)},p:function(t,o){a===(a=r(o))&&i?i.p(t,o):(i.u(),i.d(),(i=a(e,o)).c(),i.m(n.parentNode,n))},u:function(){i.u(),detachNode(n)},d:function(){i.d()}}}function create_if_block_1$6(e,t){var n;return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="alert alert-success"},m:function(e,r){insertNode(n,e,r),n.innerHTML=t.successMsg},p:function(e,t){e.successMsg&&(n.innerHTML=t.successMsg)},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_2$5(e,t){var n;return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="alert alert-error"},m:function(e,r){insertNode(n,e,r),n.innerHTML=t.errorMsg},p:function(e,t){e.errorMsg&&(n.innerHTML=t.errorMsg)},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_3$2(e,t){var n,r,a,i,o,s,c,l,d,u,p,h,f,_,m,v,g,b=__("password"),N=!1,y=__("Remember login?");function x(){N=!0,e.set({password:s.value}),N=!1}function w(){e.set({keeplogin:m.checked})}return{c:function(){n=createElement("div"),r=createElement("label"),a=createText(b),i=createText("\n                "),o=createElement("div"),s=createElement("input"),c=createText("\n                    "),l=createElement("span"),d=createText(t.passwordError),p=createText("\n            "),h=createElement("div"),f=createElement("div"),_=createElement("label"),m=createElement("input"),v=createText("Â Â "),g=createText(y),this.h()},h:function(){r.className="control-label svelte-ll2rku",addListener(s,"input",x),s.className="input-xlarge span3 svelte-ll2rku",setAttribute(s,"type","password"),s.placeholder="",l.className="help-inline",o.className="controls",n.className=u="control-group "+(t.passwordError?"error":"")+" svelte-ll2rku",addListener(m,"change",w),setAttribute(m,"type","checkbox"),m.className="svelte-ll2rku",_.className="checkbox",f.className="controls",h.className="control-group"},m:function(e,u){insertNode(n,e,u),appendNode(r,n),appendNode(a,r),appendNode(i,n),appendNode(o,n),appendNode(s,o),s.value=t.password,appendNode(c,o),appendNode(l,o),appendNode(d,l),insertNode(p,e,u),insertNode(h,e,u),appendNode(f,h),appendNode(_,f),appendNode(m,_),m.checked=t.keeplogin,appendNode(v,_),appendNode(g,_)},p:function(e,t){N||(s.value=t.password),e.passwordError&&(d.data=t.passwordError),e.passwordError&&u!==(u="control-group "+(t.passwordError?"error":"")+" svelte-ll2rku")&&(n.className=u),m.checked=t.keeplogin},u:function(){detachNode(n),detachNode(p),detachNode(h)},d:function(){removeListener(s,"input",x),removeListener(m,"change",w)}}}function create_if_block_4$1(e,t){var n,r,a,i,o,s,c=__("Login"),l=__("login / signup / headline");function d(t){var n=e.get();e.login(n.email,n.password,n.keeplogin)}function u(t){e.toSignUp(t,!0)}return{c:function(){n=createElement("button"),r=createElement("i"),a=createText(" "),i=createText(c),o=createText("\n        Â  or Â \n        "),s=createElement("button"),this.h()},h:function(){r.className="fa fa-sign-in fa-fw",addListener(n,"click",d),n.className="btn btn-large btn-primary",addListener(s,"click",u),s.className="btn btn-large"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(i,n),insertNode(o,e,t),insertNode(s,e,t),s.innerHTML=l},p:noop,u:function(){s.innerHTML="",detachNode(n),detachNode(o),detachNode(s)},d:function(){removeListener(n,"click",d),removeListener(s,"click",u)}}}function create_if_block_5$1(e,t){var n,r,a=__("Send new password");function i(t){var n=e.get();e.sendNewPassword(n.email)}return{c:function(){n=createElement("button"),r=createText(a),this.h()},h:function(){addListener(n,"click",i),n.className="btn btn-large btn-info"},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:noop,u:function(){detachNode(n)},d:function(){removeListener(n,"click",i)}}}function create_if_block_6$1(e,t){var n,r,a=__("Return to login...");function i(t){e.resetPassword(t,!1)}return{c:function(){n=createElement("a"),r=createText(a),this.h()},h:function(){addListener(n,"click",i),n.href="#"},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},u:function(){detachNode(n)},d:function(){removeListener(n,"click",i)}}}function create_if_block_7$1(e,t){var n,r,a=__("Can't recall your password?");function i(t){e.resetPassword(t,!0)}return{c:function(){n=createElement("a"),r=createText(a),this.h()},h:function(){addListener(n,"click",i),n.href="#"},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},u:function(){detachNode(n)},d:function(){removeListener(n,"click",i)}}}function create_each_block$6(e,t){var n,r,a,i,o,s,c,l=t.signin,d=(t.each_value,t.signin_index,l.label);return{c:function(){n=createElement("a"),r=createElement("i"),i=createText(" "),o=createText(d),c=createText("Â Â "),this.h()},h:function(){r.className=a=l.icon+" svelte-ll2rku",n.className="btn",n.href=s=l.url},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(i,n),appendNode(o,n),insertNode(c,e,t)},p:function(e,t){l=t.signin,t.each_value,t.signin_index,e.alternativeSignIns&&a!==(a=l.icon+" svelte-ll2rku")&&(r.className=a),e.alternativeSignIns&&d!==(d=l.label)&&(o.data=d),e.alternativeSignIns&&s!==(s=l.url)&&(n.href=s)},u:function(){detachNode(n),detachNode(c)},d:noop}}function create_if_block_8$1(e,t){for(var n,r,a,i,o,s=t.alternativeSignIns,c=[],l=0;l<s.length;l+=1)c[l]=create_each_block$6(e,assign(assign({},t),{each_value:s,signin:s[l],signin_index:l}));return{c:function(){n=createElement("div"),r=createElement("hr"),a=createText("\n        "),(i=createElement("p")).textContent="Alternatively, you can sign in using these providers:",o=createText("\n        ");for(var e=0;e<c.length;e+=1)c[e].c();this.h()},h:function(){i.className="svelte-ll2rku",setStyle(n,"margin-top","10px")},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(i,n),appendNode(o,n);for(var s=0;s<c.length;s+=1)c[s].m(n,null)},p:function(t,r){var a=r.alternativeSignIns;if(t.alternativeSignIns){for(var i=0;i<a.length;i+=1){var o=assign(assign({},r),{each_value:a,signin:a[i],signin_index:i});c[i]?c[i].p(t,o):(c[i]=create_each_block$6(e,o),c[i].c(),c[i].m(n,null))}for(;i<c.length;i+=1)c[i].u(),c[i].d();c.length=a.length}},u:function(){detachNode(n);for(var e=0;e<c.length;e+=1)c[e].u()},d:function(){destroyEach(c)}}}function create_if_block$9(e,t){var n,r,a,i,o,s,c,l,d,u,p,h,f,_,m,v,g,b,N,y,x,w,k,E,M=__("login / login / headline"),T=__("login / login / intro"),Y=__("email"),S=!1,$=t.successMsg&&create_if_block_1$6(e,t),A=t.errorMsg&&create_if_block_2$5(e,t);function D(){S=!0,e.set({email:_.value}),S=!1}var C=!t.resetPassword&&create_if_block_3$2(e,t);function L(e){return e.resetPassword?create_if_block_5$1:create_if_block_4$1}var H=L(t),B=H(e,t);function j(e){return e.resetPassword?create_if_block_6$1:create_if_block_7$1}var P=j(t),O=P(e,t),z=t.alternativeSignIns.length&&create_if_block_8$1(e,t);return{c:function(){n=createElement("h2"),r=createText("\n    "),a=createElement("p"),i=createText("\n\n    "),o=createElement("div"),$&&$.c(),s=createText("\n        "),A&&A.c(),c=createText("\n        "),l=createElement("form"),d=createElement("div"),u=createElement("label"),p=createText(Y),h=createText("\n                "),f=createElement("div"),_=createElement("input"),m=createText("\n                    "),v=createElement("span"),g=createText(t.emailError),N=createText("\n            "),C&&C.c(),y=createText("\n\n        "),B.c(),x=createText("\n\n        "),w=createElement("div"),O.c(),k=createText("\n\n    "),z&&z.c(),E=createComment(),this.h()},h:function(){a.className="svelte-ll2rku",u.className="control-label svelte-ll2rku",addListener(_,"input",D),_.className="input-xlarge span3 svelte-ll2rku",setAttribute(_,"type","email"),_.placeholder="name@example.com",v.className="help-inline",f.className="controls",d.className=b="control-group "+(t.emailError?"error":"")+" svelte-ll2rku",l.className="form-vertical",setStyle(w,"margin-top","10px"),o.className="login-form"},m:function(e,b){insertNode(n,e,b),n.innerHTML=M,insertNode(r,e,b),insertNode(a,e,b),a.innerHTML=T,insertNode(i,e,b),insertNode(o,e,b),$&&$.m(o,null),appendNode(s,o),A&&A.m(o,null),appendNode(c,o),appendNode(l,o),appendNode(d,l),appendNode(u,d),appendNode(p,u),appendNode(h,d),appendNode(f,d),appendNode(_,f),_.value=t.email,appendNode(m,f),appendNode(v,f),appendNode(g,v),appendNode(N,l),C&&C.m(l,null),appendNode(y,o),B.m(o,null),appendNode(x,o),appendNode(w,o),O.m(w,null),insertNode(k,e,b),z&&z.m(e,b),insertNode(E,e,b)},p:function(t,n){n.successMsg?$?$.p(t,n):(($=create_if_block_1$6(e,n)).c(),$.m(o,s)):$&&($.u(),$.d(),$=null),n.errorMsg?A?A.p(t,n):((A=create_if_block_2$5(e,n)).c(),A.m(o,c)):A&&(A.u(),A.d(),A=null),S||(_.value=n.email),t.emailError&&(g.data=n.emailError),t.emailError&&b!==(b="control-group "+(n.emailError?"error":"")+" svelte-ll2rku")&&(d.className=b),n.resetPassword?C&&(C.u(),C.d(),C=null):C?C.p(t,n):((C=create_if_block_3$2(e,n)).c(),C.m(l,null)),H===(H=L(n))&&B?B.p(t,n):(B.u(),B.d(),(B=H(e,n)).c(),B.m(o,x)),P!==(P=j(n))&&(O.u(),O.d(),(O=P(e,n)).c(),O.m(w,null)),n.alternativeSignIns.length?z?z.p(t,n):((z=create_if_block_8$1(e,n)).c(),z.m(E.parentNode,E)):z&&(z.u(),z.d(),z=null)},u:function(){n.innerHTML="",a.innerHTML="",detachNode(n),detachNode(r),detachNode(a),detachNode(i),detachNode(o),$&&$.u(),A&&A.u(),C&&C.u(),B.u(),O.u(),detachNode(k),z&&z.u(),detachNode(E)},d:function(){$&&$.d(),A&&A.d(),removeListener(_,"input",D),C&&C.d(),B.d(),O.d(),z&&z.d()}}}function create_if_block_9$1(e,t){var n,r,a,i,o,s,c,l,d,u,p,h,f,_,m,v,g,b,N,y,x,w,k,E,M,T,Y,S,$,A,D,C,L,H,B,j,P,O,z,U,I,F,R,W,V,G=__("login / signup / headline"),q=__("login / signup / intro"),J=__("email"),K=!1,X=__("password"),Q=!1,Z=__("repeat password"),ee=!1,te=__("Sign Up"),ne=__("Login");function re(){K=!0,e.set({email:p.value}),K=!1}function ae(){Q=!0,e.set({password:w.value}),Q=!1}function ie(){ee=!0,e.set({password2:L.value}),ee=!1}function oe(t){e.signUp()}function se(t){e.toSignUp(t,!1)}return{c:function(){n=createElement("h2"),r=createText("\n    "),a=createElement("p"),i=createText("\n\n    "),o=createElement("form"),s=createElement("div"),c=createElement("label"),l=createText(J),d=createText("\n            "),u=createElement("div"),p=createElement("input"),h=createText("\n                "),f=createElement("span"),_=createText(t.emailError),v=createText("\n        "),g=createElement("div"),b=createElement("label"),N=createText(X),y=createText("\n            "),x=createElement("div"),w=createElement("input"),k=createText("\n                "),E=createElement("span"),M=createText(t.passwordError),Y=createText("\n        "),S=createElement("div"),$=createElement("label"),A=createText(Z),D=createText("\n            "),C=createElement("div"),L=createElement("input"),H=createText("\n                "),B=createElement("span"),j=createText(t.password2Error),O=createText("\n\n    "),z=createElement("a"),U=createElement("i"),I=createText(" "),F=createText(te),R=createText("\n    Â  or Â \n    "),W=createElement("a"),V=createText(ne),this.h()},h:function(){a.className="svelte-ll2rku",c.className="control-label svelte-ll2rku",addListener(p,"input",re),p.dataset.lpignore="true",p.className="input-xxlarge span3 svelte-ll2rku",setAttribute(p,"type","email"),p.placeholder="name@example.com",f.className="help-inline",u.className="controls",s.className=m="control-group "+(t.emailError?"error":"")+" svelte-ll2rku",b.className="control-label svelte-ll2rku",addListener(w,"input",ae),w.dataset.lpignore="true",w.className="input-xxlarge span3 svelte-ll2rku",setAttribute(w,"type","password"),w.placeholder="",E.className="help-inline",x.className="controls",g.className=T="control-group "+(t.passwordError?"error":"")+" svelte-ll2rku",$.className="control-label svelte-ll2rku",addListener(L,"input",ie),L.dataset.lpignore="true",L.className="input-xxlarge span3 svelte-ll2rku",setAttribute(L,"type","password"),L.placeholder="",B.className="help-inline",C.className="controls",S.className=P="control-group "+(t.password2Error?"error":"")+" svelte-ll2rku",o.className="form-vertical",U.className="fa fa-pencil fa-fw",addListener(z,"click",oe),z.className="btn btn-large btn-primary",addListener(W,"click",se),W.className="btn btn-login btn-large"},m:function(e,m){insertNode(n,e,m),n.innerHTML=G,insertNode(r,e,m),insertNode(a,e,m),a.innerHTML=q,insertNode(i,e,m),insertNode(o,e,m),appendNode(s,o),appendNode(c,s),appendNode(l,c),appendNode(d,s),appendNode(u,s),appendNode(p,u),p.value=t.email,appendNode(h,u),appendNode(f,u),appendNode(_,f),appendNode(v,o),appendNode(g,o),appendNode(b,g),appendNode(N,b),appendNode(y,g),appendNode(x,g),appendNode(w,x),w.value=t.password,appendNode(k,x),appendNode(E,x),appendNode(M,E),appendNode(Y,o),appendNode(S,o),appendNode($,S),appendNode(A,$),appendNode(D,S),appendNode(C,S),appendNode(L,C),L.value=t.password2,appendNode(H,C),appendNode(B,C),appendNode(j,B),insertNode(O,e,m),insertNode(z,e,m),appendNode(U,z),appendNode(I,z),appendNode(F,z),insertNode(R,e,m),insertNode(W,e,m),appendNode(V,W)},p:function(e,t){K||(p.value=t.email),e.emailError&&(_.data=t.emailError),e.emailError&&m!==(m="control-group "+(t.emailError?"error":"")+" svelte-ll2rku")&&(s.className=m),Q||(w.value=t.password),e.passwordError&&(M.data=t.passwordError),e.passwordError&&T!==(T="control-group "+(t.passwordError?"error":"")+" svelte-ll2rku")&&(g.className=T),ee||(L.value=t.password2),e.password2Error&&(j.data=t.password2Error),e.password2Error&&P!==(P="control-group "+(t.password2Error?"error":"")+" svelte-ll2rku")&&(S.className=P)},u:function(){n.innerHTML="",a.innerHTML="",detachNode(n),detachNode(r),detachNode(a),detachNode(i),detachNode(o),detachNode(O),detachNode(z),detachNode(R),detachNode(W)},d:function(){removeListener(p,"input",re),removeListener(w,"input",ae),removeListener(L,"input",ie),removeListener(z,"click",oe),removeListener(W,"click",se)}}}function SignInForm(e){init(this,e),this._state=assign(data$11(),e.data),this._recompute({remoteEmailError:1,password:1,remotePasswordError:1,passwordError:1,password2:1},this._state);var t=this;e.root||(this._oncreate=[]),this._fragment=create_main_fragment$13(this,this._state),this.root._oncreate.push(function(){oncreate$4.call(t),t.fire("update",{changed:{remoteEmailError:1,password:1,remotePasswordError:1,passwordError:1,password2:1,loginForm:1,successMsg:1,errorMsg:1,emailError:1,email:1,resetPassword:1,keeplogin:1,alternativeSignIns:1,password2Error:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._oncreate))}function create_main_fragment$14(e,t){var n;function r(e){return e.$user.mayPublish?create_if_block$10:e.$user.isLoggedIn?create_if_block_2$6:create_if_block_1$7}var a=r(t),i=a(e,t);return{c:function(){i.c(),n=createComment()},m:function(e,t){i.m(e,t),insertNode(n,e,t)},p:function(t,o){a!==(a=r(o))&&(i.u(),i.d(),(i=a(e,o)).c(),i.m(n.parentNode,n))},u:function(){i.u(),detachNode(n)},d:function(){i.d()}}}function create_if_block$10(e,t){var n=new Publish({root:e.root});return{c:function(){n._fragment.c()},m:function(e,t){n._mount(e,t)},u:function(){n._unmount()},d:function(){n.destroy(!1)}}}function create_if_block_1$7(e,t){var n,r,a=new SignInForm({root:e.root,data:{loginForm:1}});return{c:function(){(n=createElement("div")).textContent="To publish a chart, you need to be signed in to Datawrapper",r=createText("\n    "),a._fragment.c(),this.h()},h:function(){n.className="alert alert-info",setStyle(n,"margin-top","30px")},m:function(e,t){insertNode(n,e,t),insertNode(r,e,t),a._mount(e,t)},u:function(){detachNode(n),detachNode(r),a._unmount()},d:function(){a.destroy(!1)}}}function create_if_block_2$6(e,t){return{c:noop,m:noop,u:noop,d:noop}}function PublishLogic(e){init(this,e),this._state=assign(this.store._init(["user"]),e.data),this.store._add(this,["user"]),this._handlers.destroy=[removeFromStore],e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$14(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function data$12(){return{PublishLogic:PublishLogic}}function oncreate$5(){var e=this;this.store.observe("publishLogic",function(t){t?(loadStylesheet(t.css),loadScript(t.src,function(){require([t.mod],function(n){e.set({PublishLogic:n.App}),e.refs.publish.set(t.data)})})):e.set({PublishLogic:PublishLogic})})}function create_main_fragment$15(e,t){var n,r,a=t.PublishLogic;function i(t){return{root:e.root}}if(a)var o=new a(i());return{c:function(){n=createElement("div"),r=createElement("div"),o&&o._fragment.c(),this.h()},h:function(){r.className="publish-step is-published",n.className="dw-create-publish"},m:function(t,a){insertNode(n,t,a),appendNode(r,n),o&&(o._mount(r,null),e.refs.publish=o)},p:function(t,n){a!==(a=n.PublishLogic)&&(o&&o.destroy(),a?((o=new a(i()))._fragment.c(),o._mount(r,null),e.refs.publish=o):e.refs.publish===o&&(e.refs.publish=null))},u:function(){detachNode(n)},d:function(){o&&o.destroy(!1)}}}function PublishSidebar(e){init(this,e),this.refs={},this._state=assign(data$12(),e.data);var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$15(this,this._state),this.root._oncreate.push(function(){oncreate$5.call(t),t.fire("update",{changed:{PublishLogic:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function data$13(){return{datasets:[],steps:[{id:"upload",title:__("Upload Data")},{id:"describe",title:__("Check & Describe")},{id:"visualize",title:__("Visualize")},{id:"publish",title:__("Publish & Embed")}]}}function oncreate$6(){}function create_main_fragment$16(e,t){var n,r,a={},i={};"step"in t&&(i.active=t.step,a.active=!0),"maxStep"in t&&(i.maxStep=t.maxStep,a.maxStep=!0),"steps"in t&&(i.steps=t.steps,a.steps=!0);var o=new EditorNav({root:e.root,data:i,_bind:function(t,n){e.get();var r={};!a.active&&t.active&&(r.step=n.active),!a.maxStep&&t.maxStep&&(r.maxStep=n.maxStep),!a.steps&&t.steps&&(r.steps=n.steps),e._set(r),a={}}});function s(e){return"upload"==e.step?create_if_block$11:"describe"==e.step?create_if_block_1$8:"visualize"==e.step?create_if_block_2$7:"publish"==e.step?create_if_block_3$3:create_if_block_4$2}e.root._beforecreate.push(function(){o._bind({active:1,maxStep:1,steps:1},o.get())});var c=s(t),l=c(e,t);return{c:function(){o._fragment.c(),n=createText("\n\n"),r=createElement("div"),l.c()},m:function(e,t){o._mount(e,t),insertNode(n,e,t),insertNode(r,e,t),l.m(r,null)},p:function(t,n){var i={};!a.active&&t.step&&(i.active=n.step,a.active=!0),!a.maxStep&&t.maxStep&&(i.maxStep=n.maxStep,a.maxStep=!0),!a.steps&&t.steps&&(i.steps=n.steps,a.steps=!0),o._set(i),a={},c===(c=s(n))&&l?l.p(t,n):(l.u(),l.d(),(l=c(e,n)).c(),l.m(r,null))},u:function(){o._unmount(),detachNode(n),detachNode(r),l.u()},d:function(){o.destroy(!1),l.d()}}}function create_if_block$11(e,t){var n={},r={};"$dataReadonly"in t&&(r.readonly=t.$dataReadonly,n.readonly=!0),"datasets"in t&&(r.datasets=t.datasets,n.datasets=!0),"$chart"in t&&(r.chart=t.$chart,n.chart=!0);var a=new UploadStep({root:e.root,data:r,_bind:function(t,r){e.get();var a={},i={};!n.readonly&&t.readonly&&(i.dataReadonly=r.readonly),!n.datasets&&t.datasets&&(a.datasets=r.datasets),!n.chart&&t.chart&&(i.chart=r.chart),e.store.set(i),e._set(a),n={}}});return e.root._beforecreate.push(function(){a._bind({readonly:1,datasets:1,chart:1},a.get())}),{c:function(){a._fragment.c()},m:function(e,t){a._mount(e,t)},p:function(e,t){var r={};!n.readonly&&e.$dataReadonly&&(r.readonly=t.$dataReadonly,n.readonly=!0),!n.datasets&&e.datasets&&(r.datasets=t.datasets,n.datasets=!0),!n.chart&&e.$chart&&(r.chart=t.$chart,n.chart=!0),a._set(r),n={}},u:function(){a._unmount()},d:function(){a.destroy(!1)}}}function create_if_block_1$8(e,t){var n;return{c:function(){n=createText("DESCRIBE")},m:function(e,t){insertNode(n,e,t)},p:noop,u:function(){detachNode(n)},d:noop}}function create_if_block_2$7(e,t){var n=new VisualizeStep({root:e.root});return{c:function(){n._fragment.c()},m:function(e,t){n._mount(e,t)},p:noop,u:function(){n._unmount()},d:function(){n.destroy(!1)}}}function create_if_block_3$3(e,t){var n=new PublishSidebar({root:e.root});return{c:function(){n._fragment.c()},m:function(e,t){n._mount(e,t)},p:noop,u:function(){n._unmount()},d:function(){n.destroy(!1)}}}function create_if_block_4$2(e,t){var n;return{c:function(){n=createText(":(")},m:function(e,t){insertNode(n,e,t)},p:noop,u:function(){detachNode(n)},d:noop}}function ChartEditor(e){init(this,e),this._state=assign(assign(this.store._init(["dataReadonly","chart"]),data$13()),e.data),this.store._add(this,["dataReadonly","chart"]),this._handlers.destroy=[removeFromStore];var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$16(this,this._state),this.root._oncreate.push(function(){oncreate$6.call(t),t.fire("update",{changed:{step:1,maxStep:1,steps:1,$dataReadonly:1,datasets:1,$chart:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function Store(e,t){this._observers={pre:blankObject(),post:blankObject()},this._handlers={},this._dependents=[],this._computed=blankObject(),this._sortedComputedProperties=[],this._state=assign({},e),this._differs=t&&t.immutable?_differsImmutable:_differs}function _some(e,t,n){t=cb(t,n);for(var r=!isArrayLike(e)&&_keys(e),a=(r||e).length,i=0;i<a;i++){var o=r?r[i]:i;if(t(e[o],o,e))return!0}return!1}function _isUndefined(e){return void 0===e}function _isNull(e){return null===e}assign(SignInForm.prototype,proto),assign(SignInForm.prototype,methods$8),SignInForm.prototype._recompute=function(e,t){e.remoteEmailError&&this._differs(t.emailError,t.emailError=emailError(t))&&(e.emailError=!0),(e.password||e.remotePasswordError)&&this._differs(t.passwordError,t.passwordError=passwordError(t))&&(e.passwordError=!0),(e.passwordError||e.password||e.password2)&&this._differs(t.password2Error,t.password2Error=password2Error(t))&&(e.password2Error=!0)},assign(PublishLogic.prototype,proto),assign(PublishSidebar.prototype,proto),assign(ChartEditor.prototype,proto),assign(Store.prototype,{_add:function(e,t){this._dependents.push({component:e,props:t})},_init:function(e){for(var t={},n=0;n<e.length;n+=1){var r=e[n];t["$"+r]=this._state[r]}return t},_remove:function(e){for(var t=this._dependents.length;t--;)if(this._dependents[t].component===e)return void this._dependents.splice(t,1)},_sortComputedProperties:function(){var e,t=this._computed,n=this._sortedComputedProperties=[],r=blankObject();function a(i){if(e[i])throw new Error("Cyclical dependency detected");if(!r[i]){r[i]=!0;var o=t[i];o&&(e[i]=!0,o.deps.forEach(a),n.push(o))}}for(var i in this._computed)e=blankObject(),a(i)},compute:function(e,t,n){var r,a=this,i={deps:t,update:function(i,o,s){var c=t.map(function(e){return e in o&&(s=!0),i[e]});if(s){var l=n.apply(null,c);a._differs(l,r)&&(r=l,o[e]=!0,i[e]=r)}}};i.update(this._state,{},!0),this._computed[e]=i,this._sortComputedProperties()},fire:fire,get:get,observe:observe,on:on,onchange:function(e){return console.warn("store.onchange is deprecated in favour of store.on('state', event => {...})"),this.on("state",function(t){e(t.current,t.changed)})},set:function(e){var t=this._state,n=this._changed={},r=!1;for(var a in e){if(this._computed[a])throw new Error("'"+a+"' is a read-only property");this._differs(e[a],t[a])&&(n[a]=r=!0)}if(r){this._state=assign(assign({},t),e);for(var i=0;i<this._sortedComputedProperties.length;i+=1)this._sortedComputedProperties[i].update(this._state,n);this.fire("state",{changed:n,current:this._state,previous:t});var o=this._dependents.slice();for(i=0;i<o.length;i+=1){var s=o[i],c={};r=!1;for(var l=0;l<s.props.length;l+=1){var d=s.props[l];d in n&&(c["$"+d]=this._state[d],r=!0)}r&&s.component.set(c)}this.fire("update",{changed:n,current:this._state,previous:t})}}});var _delay=restArgs(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)});function _debounce(e,t,n){var r,a,i=function(t,n){r=null,n&&(a=e.apply(t,n))},o=restArgs(function(o){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(i,t),s&&(a=e.apply(this,o))}else r=_delay(i,t,this,o);return a});return o.cancel=function(){clearTimeout(r),r=null},o}function _range(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),a=Array(r),i=0;i<r;i++,e+=n)a[i]=e;return a}function _isString(e){return"[object String]"===toString.call(e)}function dataset(e){var t={},n=e.slice(0);function r(e){for(var n=e.name(),r=n,a=1;t.hasOwnProperty(r);)r=n+"."+a++;r!=n&&e.name(r)}e.forEach(function(e){r(e),t[e.name()]=e});var a={columns:function(){return e},column:function(n){if(_isString(n)){if(void 0!==t[n])return t[n];throw'No column found with that name: "'+n+'"'}if(!(n<0)){if(void 0!==e[n])return e[n];throw"No column found with that index: "+n}},numColumns:function(){return e.length},numRows:function(){return e[0].length},eachColumn:function(t){e.forEach(t)},hasColumn:function(n){return void 0!==(_isString(n)?t[n]:e[n])},indexOf:function(n){return a.hasColumn(n)?e.indexOf(t[n]):-1},list:function(){return _range(e[0].length).map(function(t){var n={};return e.forEach(function(e){n[e.name()]=e.val(t)}),n})},csv:function(){var t="";return e.forEach(function(e,n){var r=e.title();r.indexOf('"')>-1&&r.replace('"','\\"'),r.indexOf(",")>-1&&(r='"'+r+'"'),t+=(n>0?",":"")+r}),_range(a.numRows()).forEach(function(n){t+="\n",e.forEach(function(e,r){var a=""+("date"==e.type()?e.raw(n):e.val(n));a.indexOf('"')>-1&&a.replace('"','\\"'),a.indexOf(",")>-1&&(a='"'+a+'"'),t+=(r>0?",":"")+a})}),t},toCSV:function(){return this.csv()},filterColumns:function(n){return e=e.filter(function(e){return!n[e.name()]}),n.forEach(function(e,n){e&&t[n]&&delete t[n]}),a},eachRow:function(e){var t;for(t=0;t<a.numRows();t++)e(t);return a},add:function(i){return r(i),e.push(i),t[i.name()]=i,n.push(i),a},reset:function(){return e=n.slice(0),t={},e.forEach(function(e){t[e.name()]=e}),a},limitRows:function(t){return e.forEach(function(e){e.limitRows(t)}),a},limitColumns:function(t){return e.length>t&&(e.length=t,n.length=t),a},columnOrder:function(t){return arguments.length?(e.length=0,t.forEach(function(t){e.push(n[t])}),a):e.map(function(e){return n.indexOf(e)})}};return a}function _every(e,t,n){t=cb(t,n);for(var r=!isArrayLike(e)&&_keys(e),a=(r||e).length,i=0;i<a;i++){var o=r?r[i]:i;if(!t(e[o],o,e))return!1}return!0}function _isDate(e){return"[object Date]"===toString.call(e)}function _random(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}function _allKeys(e){if(!_isObject(e))return[];var t=[];for(var n in e)t.push(n);return hasEnumBug&&collectNonEnumProps(e,t),t}var _extend=createAssigner(_allKeys);function _clone(e){return _isObject(e)?_isArray(e)?e.slice():_extend({},e):e}function _sample(e,t,n){if(null==t||n)return isArrayLike(e)||(e=_values(e)),e[_random(e.length-1)];var r=isArrayLike(e)?_clone(e):_values(e),a=getLength(r);t=Math.max(Math.min(t,a),0);for(var i=a-1,o=0;o<t;o++){var s=_random(o,i),c=r[o];r[o]=r[s],r[s]=c}return r.slice(0,t)}function _shuffle(e){return _sample(e,1/0)}function _map(e,t,n){t=cb(t,n);for(var r=!isArrayLike(e)&&_keys(e),a=(r||e).length,i=Array(a),o=0;o<a;o++){var s=r?r[o]:o;i[o]=t(e[s],s,e)}return i}function _flatten(e,t){return flatten(e,t,!1)}function _isRegExp(e){return"[object RegExp]"===toString.call(e)}function equalish(e,t){return e-t<1e-6}var columnTypes={},_identity$1=function(e){return e};columnTypes.text=function(){return{parse:_identity$1,errors:function(){return 0},name:function(){return"text"},formatter:function(){return _identity$1},isValid:function(){return!0},format:function(){}}},columnTypes.number=function(e){var t,n=0,r={"-.":/^ *[-â€“â€”âˆ’]?[0-9]*(\.[0-9]+)?(e[+-][0-9]+)?%? *$/,"-,":/^ *[-â€“â€”âˆ’]?[0-9]*(,[0-9]+)?%? *$/,",.":/^ *[-â€“â€”âˆ’]?[0-9]{1,3}(,[0-9]{3})*(\.[0-9]+)?%? *$/,".,":/^ *[-â€“â€”âˆ’]?[0-9]{1,3}(\.[0-9]{3})*(,[0-9]+)?%? *$/," .":/^ *[-â€“â€”âˆ’]?[0-9]{1,3}( [0-9]{3})*(\.[0-9]+)?%? *$/," ,":/^ *[-â€“â€”âˆ’]?[0-9]{1,3}( [0-9]{3})*(,[0-9]+)?%? *$/,"â€¯.":/^ *[-â€“â€”âˆ’]?[0-9]{1,3}(â€¯[0-9]{3})*(\.[0-9]+)?%? *$/,"â€¯,":/^ *[-â€“â€”âˆ’]?[0-9]{1,3}(â€¯[0-9]{3})*(,[0-9]+)?%? *$/,"Â .":/^ *[-â€“â€”âˆ’]?[0-9]{1,3}(Â [0-9]{3})*(\.[0-9]+)?%? *$/,"Â ,":/^ *[-â€“â€”âˆ’]?[0-9]{1,3}(Â [0-9]{3})*(,[0-9]+)?%? *$/,"'.":/^ *[-â€“â€”âˆ’]?[0-9]{1,3}('[0-9]{3})*(\.[0-9]+)?%? *$/},a={"-.":"1234.56","-,":"1234,56",",.":"1,234.56",".,":"1.234,56"," .":"1 234.56"," ,":"1 234,56","Â .":"1 234.56","Â ,":"1 234,56","â€¯.":"1 234.56","â€¯,":"1 234,56"},i={na:1,"n/a":1,"-":1,":":1},o={},s=["-.",0];_each(e=e||[],function(e){_each(r,function(t,n){void 0===o[n]&&(o[n]=0),t.test(e)&&(o[n]+=1,o[n]>s[1]&&(s[0]=n,s[1]=o[n]))})}),t=s[0];var c={parse:function(e){if(_isNumber(e)||_isUndefined(e)||_isNull(e))return e;var r=e.replace("%","").replace("âˆ’","-").replace("â€“","-").replace("â€”","-");return"-"!==t[0]&&(r=r.replace(new RegExp("."===t[0]?"\\.":t[0],"g"),"")),"."!==t[1]&&(r=r.replace(t[1],".")),isNaN(r)||""===r?(i[r.toLowerCase()]||""===r||n++,e):Number(r)},toNum:function(e){return e},fromNum:function(e){return e},errors:function(){return n},name:function(){return"number"},formatter:function(e){var t=e["number-format"]||"-",n=Number(e["number-divisor"]||0),r=(e["number-append"]||"").replace(/ /g,"Â "),a=(e["number-prepend"]||"").replace(/ /g,"Â ");return function(e,i,o){if(isNaN(e))return e;var s=t;if(0!==n&&"-"===s&&(s="n1"),0!==n&&(e=Number(e)/Math.pow(10,n)),"s"===s.substr(0,1)){var c=+s.substr(1);s="n"+Math.max(0,function(e,t){return 0===e?0:Math.round(t-Math.ceil(Math.log(Math.abs(e))/Math.LN10))}(e,c))}return o&&(s="n0"),"-"===s&&(s=equalish(e,Math.round(e))?"n0":equalish(e,.1*Math.round(10*e))?"n1":equalish(e,.01*Math.round(100*e))?"n2":equalish(e,.001*Math.round(1e3*e))?"n3":equalish(e,1e-4*Math.round(1e4*e))?"n4":equalish(e,1e-5*Math.round(1e5*e))?"n5":"n6"),e=Globalize.format(e,"-"!==s?s:null),i?a+e+r:e}},isValid:function(e){return""===e||i[String(e).toLowerCase()]||_isNumber(c.parse(e))},ambiguousFormats:function(){var e=[];return _each(o,function(t,n){t===s[1]&&e.push([n,a[n]])}),e},format:function(e){return arguments.length?(t=e,c):t}};return c},columnTypes.date=function(){var e=/^ */.source,t=/[*']* *$/.source,n=/[ \-/.]?/.source,r=/[ \-/.]/.source,a=/[ \-/.,]/.source,i=/[ \-|T]/.source,o={YY:{parse:/['â€™â€˜]?(\d{2})/},YYYY:{test:/([12]\d{3})/,parse:/(\d{4})/},YYYY2:{test:/(?:1[7-9]|20)\d{2}/,parse:/(\d{4})/},H:{parse:/h([12])/},Q:{parse:/q([1234])/},W:{parse:/w([0-5]?[0-9])/},Mm:{test:/m?(0?[1-9]|1[0-2])/,parse:/m?(0?[1-9]|1[0-2])/},MM:{test:/(0?[1-9]|1[0-2])/,parse:/(0?[1-9]|1[0-2])/},DD:{parse:/(0?[1-9]|[1-2][0-9]|3[01])/},DOW:{parse:/([0-7])/},HHMM:{parse:/(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *(am|pm)?/}},s={0:["jan","january","januar","jÃ¤nner","jÃ¤n","janv","janvier","ene","enero","gen","gennaio","janeiro"],1:["feb","february","febr","februar","fÃ©v","fÃ©vr","fÃ©vrier","febrero","febbraio","fev","fevereiro"],2:["mar","mÃ¤r","march","mrz","mÃ¤rz","mars","mars","marzo","marzo","marÃ§o"],3:["apr","april","apr","april","avr","avril","abr","abril","aprile"],4:["may","mai","mayo","mag","maggio","maio","maj"],5:["jun","june","juni","juin","junio","giu","giugno","junho"],6:["jul","july","juli","juil","juillet","julio","lug","luglio","julho"],7:["aug","august","aoÃ»t","ago","agosto"],8:["sep","september","sept","septembre","septiembre","set","settembre","setembro"],9:["oct","october","okt","oktober","octobre","octubre","ott","ottobre","out","outubro"],10:["nov","november","november","novembre","noviembre","novembre","novembro"],11:["dec","december","dez","des","dezember","dÃ©c","dÃ©cembre","dic","diciembre","dicembre","desember","dezembro"]},c={};_each(s,function(e,t){_each(e,function(e){c[e]=t})}),o.MMM={parse:new RegExp("("+_flatten(_values(s)).join("|")+")")},_each(o,function(e){e.parse=e.parse.source,_isRegExp(e.test)?e.test=e.test.source:e.test=e.parse});var l={YYYY:{test:d(o.YYYY2.test),parse:d(o.YYYY2.parse),precision:"year"},"YYYY-H":{test:d(o.YYYY.test,n,o.H.test),parse:d(o.YYYY.parse,n,o.H.parse),precision:"half"},"H-YYYY":{test:d(o.H.test,r,o.YYYY.test),parse:d(o.H.parse,r,o.YYYY.parse),precision:"half"},"YYYY-Q":{test:d(o.YYYY.test,n,o.Q.test),parse:d(o.YYYY.parse,n,o.Q.parse),precision:"quarter"},"Q-YYYY":{test:d(o.Q.test,r,o.YYYY.test),parse:d(o.Q.parse,r,o.YYYY.parse),precision:"quarter"},"YYYY-M":{test:d(o.YYYY.test,n,o.Mm.test),parse:d(o.YYYY.parse,n,o.Mm.parse),precision:"month"},"M-YYYY":{test:d(o.MM.test,r,o.YYYY.test),parse:d(o.MM.parse,r,o.YYYY.parse),precision:"month"},"YYYY-MMM":{test:d(o.YYYY.test,r,o.MMM.parse),parse:d(o.YYYY.parse,r,o.MMM.parse),precision:"month"},"MMM-YYYY":{test:d(o.MMM.parse,r,o.YYYY.test),parse:d(o.MMM.parse,r,o.YYYY.parse),precision:"month"},"MMM-YY":{test:d(o.MMM.parse,r,o.YY.test),parse:d(o.MMM.parse,r,o.YY.parse),precision:"month"},MMM:{test:d(o.MMM.parse),parse:d(o.MMM.parse),precision:"month"},"YYYY-WW":{test:d(o.YYYY.test,n,o.W.test),parse:d(o.YYYY.parse,n,o.W.parse),precision:"week"},"WW-YYYY":{test:d(o.W.test,r,o.YYYY.test),parse:d(o.W.parse,r,o.YYYY.parse),precision:"week"},"MM/DD/YYYY":{test:d(o.MM.test,"([\\-\\/])",o.DD.test,"\\2",o.YYYY.test),parse:d(o.MM.parse,"([\\-\\/])",o.DD.parse,"\\2",o.YYYY.parse),precision:"day"},"DD/MM/YYYY":{test:d(o.DD.test,"([\\-\\.\\/ ?])",o.MM.test,"\\2",o.YYYY.test),parse:d(o.DD.parse,"([\\-\\.\\/ ?])",o.MM.parse,"\\2",o.YYYY.parse),precision:"day"},"DD/MMM/YYYY":{test:d(o.DD.test,"([\\-\\.\\/ ?])",o.MMM.test,"\\2",o.YYYY.test),parse:d(o.DD.parse,"([\\-\\.\\/ ?])",o.MMM.parse,"\\2",o.YYYY.parse),precision:"day"},"DD/MMM/YY":{test:d(o.DD.test,"([\\-\\.\\/ ?])",o.MMM.test,"\\2",o.YY.test),parse:d(o.DD.parse,"([\\-\\.\\/ ?])",o.MMM.parse,"\\2",o.YY.parse),precision:"day"},"YYYY-MM-DD":{test:d(o.YYYY.test,"([\\-\\.\\/ ?])",o.MM.test,"\\2",o.DD.test),parse:d(o.YYYY.parse,"([\\-\\.\\/ ?])",o.MM.parse,"\\2",o.DD.parse),precision:"day"},"MMM-DD-YYYY":{test:d(o.MMM.test,r,o.DD.test,a,o.YYYY.test),parse:d(o.MMM.parse,r,o.DD.parse,a,o.YYYY.parse),precision:"day"},"YYYY-WW-d":{test:d(o.YYYY.test,n,o.W.test,r,o.DOW.test),parse:d(o.YYYY.parse,n,o.W.parse,r,o.DOW.parse),precision:"day"},"MM/DD/YYYY HH:MM":{test:d(o.MM.test,"([\\-\\/])",o.DD.test,"\\2",o.YYYY.test,i,o.HHMM.test),parse:d(o.MM.parse,"([\\-\\/])",o.DD.parse,"\\2",o.YYYY.parse,i,o.HHMM.parse),precision:"day-minutes"},"DD.MM.YYYY HH:MM":{test:d(o.DD.test,"([\\-\\.\\/ ?])",o.MM.test,"\\2",o.YYYY.test,i,o.HHMM.test),parse:d(o.DD.parse,"([\\-\\.\\/ ?])",o.MM.parse,"\\2",o.YYYY.parse,i,o.HHMM.parse),precision:"day-minutes"},"YYYY-MM-DD HH:MM":{test:d(o.YYYY.test,"([\\-\\.\\/ ?])",o.MM.test,"\\2",o.DD.test,i,o.HHMM.test),parse:d(o.YYYY.parse,"([\\-\\.\\/ ?])",o.MM.parse,"\\2",o.DD.parse,i,o.HHMM.parse),precision:"day-minutes"},ISO8601:{test:/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,parse:function(e){return e},precision:"day-seconds"}};function d(){return new RegExp(e+Array.prototype.slice.call(arguments).join(" *")+t,"i")}function u(e,t){var n=l[t];return _isRegExp(n.test)?n.test.test(e):n.test(e,t)}function p(e,t,n){var r=new Date(Date.UTC(e,0,3));return r.setUTCDate(3-r.getUTCDay()+7*(t-1)+parseInt(n,10)),r}function h(e,t){return 12!==e?e+("pm"===t?12:0):"am"===t?0:12}return function(e){var t,n=0,r={},a=["",0];e=e||[],_each(l,function(t,n){_each(e,function(e){void 0===r[n]&&(r[n]=0),u(e,n)&&(r[n]+=1,r[n]>a[1]&&(a[0]=n,a[1]=r[n]))})}),t=a[0];var i={parse:function(e){if(_isDate(e)||_isUndefined(e))return e;if(!t||!_isString(e))return n++,e;var r,a,i,o=(r=e.toLowerCase(),_isRegExp((i=l[a=t]).parse)?r.match(i.parse):i.parse(r,a));if(!o)return n++,e;function s(e){return(e=+e)<20?2e3+e:1900+e}u(e,t)||n++;var d=(new Date).getFullYear();switch(t){case"YYYY":return new Date(o[1],0,1);case"YYYY-H":return new Date(o[1],6*(o[2]-1),1);case"H-YYYY":return new Date(o[2],6*(o[1]-1),1);case"YYYY-Q":return new Date(o[1],3*(o[2]-1),1);case"Q-YYYY":return new Date(o[2],3*(o[1]-1),1);case"YYYY-M":return new Date(o[1],o[2]-1,1);case"M-YYYY":return new Date(o[2],o[1]-1,1);case"YYYY-MMM":return new Date(+o[1],c[o[2]],1);case"MMM-YYYY":return new Date(+o[2],c[o[1]],1);case"MMM-YY":return new Date(s(+o[2]),c[o[1]],1);case"MMM":return new Date(d,c[o[1]],1);case"YYYY-WW":return p(o[1],o[2],1);case"WW-YYYY":return p(o[2],o[1],1);case"YYYY-WW-d":return p(o[1],o[2],o[3]);case"YYYY-MM-DD":return new Date(o[1],o[3]-1,o[4]);case"DD/MM/YYYY":return new Date(o[4],o[3]-1,o[1]);case"DD/MMM/YYYY":return new Date(o[4],c[o[3]],o[1]);case"DD/MMM/YY":return new Date(s(o[4]),c[o[3]],o[1]);case"MM/DD/YYYY":return new Date(o[4],o[1]-1,o[3]);case"MMM-DD-YYYY":return new Date(o[3],c[o[1]],o[2]);case"YYYY-MM-DD HH:MM":return new Date(+o[1],o[3]-1,+o[4],h(+o[5],o[8]),+o[6]||0,+o[7]||0);case"DD.MM.YYYY HH:MM":return new Date(+o[4],o[3]-1,+o[1],h(+o[5],o[8]),+o[6]||0,+o[7]||0);case"MM/DD/YYYY HH:MM":return new Date(+o[4],o[1]-1,+o[3],h(+o[5],o[8]),+o[6]||0,+o[7]||0);case"ISO8601":return new Date(o.toUpperCase());default:console.warn("unknown format",t)}return n++,e},toNum:function(e){return e.getTime()},fromNum:function(e){return new Date(e)},errors:function(){return n},name:function(){return"date"},format:function(e){return arguments.length?(t=e,i):t},precision:function(){return l[t].precision},formatter:function(){if(!t)return _identity$1;var e=Globalize.culture().calendar.patterns.M.replace("MMMM","MMM");switch(l[t].precision){case"year":return function(e){return _isDate(e)?e.getFullYear():e};case"half":return function(e){return _isDate(e)?e.getFullYear()+" H"+(e.getMonth()/6+1):e};case"quarter":return function(e){return _isDate(e)?e.getFullYear()+" Q"+(e.getMonth()/3+1):e};case"month":return function(e){return _isDate(e)?Globalize.format(e,"MMM yy"):e};case"week":return function(e){return _isDate(e)?function(e){var t=e.getUTCDay(),n=new Date(e.valueOf());n.setDate(n.getDate()-(t+6)%7+3);var r=n.getUTCFullYear(),a=Math.floor((n.getTime()-new Date(r,0,1,-6))/864e5);return[r,1+Math.floor(a/7),t>0?t:7]}(e).slice(0,2).join(" W"):e};case"day":return function(e,t){return _isDate(e)?Globalize.format(e,t?"D":"d"):e};case"day-minutes":return function(t){return _isDate(t)?Globalize.format(t,e).replace(" ","&nbsp;")+" - "+Globalize.format(t,"t").replace(" ","&nbsp;"):t};case"day-seconds":return function(e){return _isDate(e)?Globalize.format(e,"T").replace(" ","&nbsp;"):e}}},isValid:function(e){return _isDate(i.parse(e))},ambiguousFormats:function(){var e=[];return _each(r,function(t,n){t===a[1]&&e.push([n,n])}),e}};return i}}();var TAGS=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,COMMENTS_AND_PHP_TAGS=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,default_allowed="<a><b><br><br/><i><strong><sup><sub><strike><u><em><tt>";function purifyHtml(e,t){if(null===e)return null;if(void 0!==e){if((e=String(e)).indexOf("<")<0||e.indexOf(">")<0)return e;if(e=stripTags(e,t),"undefined"==typeof document)return e;var n=document.createElement("div");n.innerHTML=e;for(var r=n.querySelectorAll("*"),a=0;a<r.length;a++)for(var i=0;i<r[a].attributes.length;i++){var o=r[a].attributes[i];o.specified&&"on"==o.name.substr(0,2)&&r[a].removeAttribute(o.name)}return n.innerHTML}}function stripTags(e,t){t=(((void 0!==t?t||"":default_allowed)+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");for(var n=e,r=e;;)if((n=r)===(r=n.replace(COMMENTS_AND_PHP_TAGS,"").replace(TAGS,function(e,n){return t.indexOf("<"+n.toLowerCase()+">")>-1?e:""})))return r}function column(e,t,n){function r(e){return null!==e&&void 0!==e&&""!==e}var a=_shuffle(_range(t.length)).filter(function(e){return r(t[e])}).slice(0,200).map(function(e){return t[e]});n=n?columnTypes[n](a):function(e){if(_every(t,_isNumber))return columnTypes.number();if(_every(t,_isDate))return columnTypes.date();var n,a=[columnTypes.date(e),columnTypes.number(e),columnTypes.text()],i=t.filter(r).length;return _each(t,function(e){_each(a,function(t){t.parse(e)})}),_every(a,function(e){return e.errors()/i<.1&&(n=e),!n}),_isUndefined(n)&&(n=a[2]),n}(a);var i,o,s,c=t.slice(0),l={name:function(){return arguments.length?(e=arguments[0],l):purifyHtml(e)},title:function(){return arguments.length?(s=arguments[0],l):purifyHtml(s||e)},length:t.length,val:function(e,r){if(arguments.length){var a=r?c:t;return e<0&&(e+=a.length),n.parse(purifyHtml(a[e]))}},values:function(e){var r=e?c:t;return _map(r=_map(r,function(e){return purifyHtml(e)}),n.parse)},each:function(e){for(var n=0;n<t.length;n++)e(l.val(n),n)},raw:function(e,n){return arguments.length?2==arguments.length?(t[e]=n,l):purifyHtml(t[e]):t},type:function(e){if(!0===e)return n;if(_isString(e)){if(columnTypes[e])return n=columnTypes[e](a),l;throw"unknown column type: "+e}return n.name()},range:function(){return!!n.toNum&&(i||(i=[Number.MAX_VALUE,-Number.MAX_VALUE],l.each(function(e){_isNumber(e=n.toNum(e))&&!_isNaN(e)&&(e<i[0]&&(i[0]=e),e>i[1]&&(i[1]=e))}),i[0]=n.fromNum(i[0]),i[1]=n.fromNum(i[1])),i)},total:function(){return!!n.toNum&&(o||(o=0,l.each(function(e){o+=n.toNum(e)}),o=n.fromNum(o)),o)},filterRows:function(e){return t=[],arguments.length?_each(e,function(e){t.push(c[e])}):t=c.slice(0),l.length=t.length,i=o=!1,l},toString:function(){return e+" ("+n.name()+")"},indexOf:function(e){return _find(_range(t.length),function(t){return l.val(t)==e})},limitRows:function(e){c.length>e&&(c.length=e,t.length=e,l.length=e)}};return l}function delimited(e){return{dataset:function(){if(e.url);else if(e.csv)return new Promise(function(t){t(e.csv)}).then(function(t){return new DelimitedParser(e).parse(t)});throw"you need to provide either an URL or CSV data."},parse:function(){return new DelimitedParser(e).parse(e.csv)}}}var DelimitedParser=function(e){e=Object.assign({delimiter:"auto",quoteChar:'"',skipRows:0,emptyValue:null,transpose:!1,firstRowIsHeader:!0},e),this.__delimiterPatterns=getDelimiterPatterns(e.delimiter,e.quoteChar),this.opts=e};function getDelimiterPatterns(e,t){return new RegExp("(\\"+e+"|\\r?\\n|\\r|^)(?:"+t+"([^"+t+"]*(?:"+t+'"[^'+t+"]*)*)"+t+"|([^"+t+"\\"+e+"\\r\\n]*))","gi")}function json(e){return{dataset:function(){if(e.url)return fetch(e.url).then(function(e){return e.text()}).then(function(e){return JSON.parse(e)});if(e.csv)return new Promise(function(t){t(e.csv)}).then(function(e){return JSON.parse(e)});throw"you need to provide either an URL or CSV data."},parse:function(){return JSON.parse(e.csv)}}}function reorderColumns(e,t){var n=e.getMetadata("data.column-order",[]);return n.length&&n.length==t.numColumns()&&t.columnOrder(n),t}function applyChanges(e,t){var n=e.getMetadata("data.changes",[]),r=e.getMetadata("data.transpose",!1);return n.forEach(function(e){var n="row",a="column";r&&(n="column",a="row"),t.hasColumn(e[a])&&(0===e[n]?t.column(e[a]).title(e.value):t.column(e[a]).raw(e[n]-1,e.value))}),_each(e.getMetadata("data.column-format",{}),function(e,n){e.type&&t.hasColumn(n)&&"auto"!=e.type&&t.column(n).type(e.type),e["input-format"]&&t.hasColumn(n)&&t.column(n).type(!0).format(e["input-format"])}),t}function _isBoolean(e){return!0===e||!1===e||"[object Boolean]"===toString.call(e)}function addComputedColumns(chart,dataset){var v_columns=chart.getMetadata("describe.computed-columns",{}),data=dataset.list(),columnNameToVar={},col_aggregates={};return dataset.eachColumn(function(e){e.isComputed||(columnNameToVar[e.name()]=column_name_to_var(e.name()),"number"==e.type()&&(col_aggregates[e.name()]={min:d3_min(e.values()),max:d3_max(e.values()),sum:d3_sum(e.values()),mean:d3_mean(e.values()),median:d3_median(e.values())}))}),_each(v_columns,add_computed_column),dataset;function add_computed_column(formula,name){var datefmt=function(e){return e.getFullYear()+"-"+left_pad(1+e.getMonth(),2,0)+"-"+left_pad(1+e.getDate(),2,0)},values=data.map(function(row,row_i){var context=[];return context.push("var __row = "+row_i+";"),row.forEach(function(e,t){columnNameToVar[t]&&(context.push("var "+columnNameToVar[t]+" = "+JSON.stringify(e)+";"),"number"==dataset.column(t).type()&&(context.push("var "+columnNameToVar[t]+"__sum = "+col_aggregates[t].sum+";"),context.push("var "+columnNameToVar[t]+"__min = "+col_aggregates[t].min+";"),context.push("var "+columnNameToVar[t]+"__max = "+col_aggregates[t].max+";"),context.push("var "+columnNameToVar[t]+"__mean = "+col_aggregates[t].mean+";"),context.push("var "+columnNameToVar[t]+"__median = "+col_aggregates[t].median+";")))}),context.push("var max = Math.max, min = Math.min;"),function(){try{return eval(this.context.join("\n")+"\n"+formula)}catch(e){return console.warn(e),"n/a"}}.call({context:context})}).map(function(e){return _isBoolean(e)?e?"yes":"no":_isDate(e)?datefmt(e):_isNumber(e)?""+e:String(e)}),v_col=dw.column(name,values);v_col.isComputed=!0,dataset.add(v_col)}function column_name_to_var(e){return e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w\-]+/g,"").replace(/-/g,"_").replace(/\_\_+/g,"_").replace(/^_+/,"").replace(/_+$/,"").replace(/^(\d)/,"_$1").replace(/^(abstract|arguments|await|boolean|break|byte|case|catch|char|class|const|continue|debugger|default|delete|do|double|else|enum|eval|export|extends|false|final|finally|float|for|function|goto|if|implements|import|in|instanceof|int|interface|let|long|native|new|null|package|private|protected|public|return|short|static|super|switch|synchronized|this|throw|throws|transient|true|try|typeof|var|void|volatile|while|window|with|yield)$/,"$1_")}function d3_min(e){var t,n,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(n=e[r])&&n>=n){t=n;break}for(;++r<a;)null!=(n=e[r])&&t>n&&(t=n)}return t}function d3_max(e){var t,n,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(n=e[r])&&n>=n){t=n;break}for(;++r<a;)null!=(n=e[r])&&n>t&&(t=n)}return t}function d3_sum(e){var t,n=0,r=e.length,a=-1;if(1===arguments.length)for(;++a<r;)d3_numeric(t=+e[a])&&(n+=t);return n}function d3_mean(e){for(var t,n=0,r=e.length,a=-1,i=r;++a<r;)d3_numeric(t=d3_number(e[a]))?n+=t:--i;if(i)return n/i}function d3_median(e){var t,n=[],r=e.length,a=-1;if(1===arguments.length)for(;++a<r;)d3_numeric(t=d3_number(e[a]))&&n.push(t);if(n.length)return d3_quantile(n.sort(d3_ascending),.5)}function d3_quantile(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),a=+e[r-1],i=n-r;return i?a+i*(e[r]-a):a}function d3_number(e){return null===e?NaN:+e}function d3_numeric(e){return!isNaN(e)}function d3_ascending(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function left_pad(e,t,n){for(e=String(e);e.length<t;)e=String(n)+e;return e}}function loadGlobalizeLocale(e,t){window.Globalize.cultures.hasOwnProperty(e)?(window.Globalize.culture(e),"function"==typeof t&&t()):getScript("/static/vendor/globalize/cultures/globalize.culture."+e+".js",function(){window.Globalize.culture(e),"function"==typeof t&&t()})}function getScript(e,t){var n=document.createElement("script"),r=document.getElementsByTagName("script")[0];n.async=1,n.onload=n.onreadystatechange=function(e,r){(r||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n=void 0,r||t&&t())},n.src=URL,r.parentNode.insertBefore(n,r)}function getNestedValue(e,t){for(var n=0;n<t.length;n+=1){if(!e)return;e=e[t[n]]}return e}function observeDeep(e,t,n){var r=e.replace(/\[(\d+)\]/g,".$1").split("."),a=r[0],i=t.bind(this),o=getNestedValue(this.get(),r);return n&&!1===n.init||i(o),this.on(n&&n.defer?"update":"state",function(e){var t=e.changed,n=e.current;e.previous;if(t[a]){var s=getNestedValue(n,r);s===o&&"object"!=typeof s&&"function"!=typeof s||(i(s,o),o=s)}})}DelimitedParser.prototype.parse=function(e){this.__rawData=e;var t=this.opts;"auto"==t.delimiter&&(t.delimiter=this.guessDelimiter(e,t.skipRows),this.__delimiterPatterns=getDelimiterPatterns(t.delimiter,t.quoteChar));var n,r="|"!=t.delimiter?"|":"#";return e=r+"\n"+e.replace(/\s+$/g,"")+r,n=function(e,t,n){n=n||",";for(var a,i=[[]],o=null;o=e.exec(t);){var s=o[1];s.length&&s!=n&&i.push([]),a=o[2]?o[2].replace(new RegExp('""',"g"),'"'):o[3],i[i.length-1].push(a)}i[0][0].substr(0,1)==r&&(i[0][0]=i[0][0].substr(1));var c=i.length-1,l=i[c].length-1,d=i[c][l].length-1;return i[c][l].substr(d)==r&&(i[c][l]=i[c][l].substr(0,d)),i.slice(1)}(this.__delimiterPatterns,e,t.delimiter),t.transpose&&(n=function(e){var t=e,n=t.length?t.length:0,r=t[0]instanceof Array?t[0].length:0;if(0===r||0===n)return[];var a,i,o=[];for(a=0;a<r;a++)for(o[a]=[],i=0;i<n;i++)o[a][i]=t[i][a];return o}(n)),function(e){var n=[],r={},a=e.length,i=e[0].length,o=t.skipRows,s=[];t.firstRowIsHeader&&(s=e[o],o++);for(var c=0;c<i;c++){var l=_isString(s[c])?s[c].replace(/^\s+|\s+$/g,""):"",d=""!==l?"":1;for(l=""!==l?l:"X.";void 0!==r[l+d];)d=""===d?1:d+1;n.push({name:l+d,data:[]}),r[l+d]=!0}return _range(o,a).forEach(function(r){n.forEach(function(n,a){n.data.push(""!==e[r][a]?e[r][a]:t.emptyValue)})}),dataset(n=n.map(function(e){return column(e.name,e.data)}))}(n)},DelimitedParser.prototype.guessDelimiter=function(e){var t=0,n=-1,r=this,a=["\t",";","|",","];return a.forEach(function(a,i){var o=getDelimiterPatterns(a,r.quoteChar),s=e.match(o).length;"\t"==a&&(s*=1.15),s>t&&(t=s,n=i)}),a[n]};var storeChanges=_debounce(function(e,t){var n=e.serialize();putJSON("/api/2/charts/"+n.id,JSON.stringify(n),function(){t&&t()})},1e3),storeData=_debounce(function(e,t){var n=e.getMetadata("data.json")?JSON.stringify(e.dataset()):e.rawData();putJSON("/api/2/charts/"+e.get("id")+"/data",n,function(){t&&t()})},1e3),Chart=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(e,t){var n=this,r={firstRowIsHeader:this.getMetadata("data.horizontal-header",!0),transpose:this.getMetadata("data.transpose",!1)};return e&&!t?r.csv=e:r.url=t||"data.csv",r.csv&&this.set({_rawData:r.csv}),(this.getMetadata("data.json",!1)?json(r):delimited(r)).dataset().then(function(e){return n.dataset(e),e}).catch(function(e){console.log("nope",e)})},t.prototype.dataset=function(e){if(arguments.length){!0!==e&&(this._dataset_cache=e);var t="function"!=typeof e.list;return this._dataset=t?e:reorderColumns(this,applyChanges(this,addComputedColumns(this,!0===e?this._dataset_cache:e))),t&&this.set({dataset:e}),this._dataset}return this._dataset},t.prototype.theme=function(e){return arguments.length?(this.set({theme:e}),this):this.get().theme},t.prototype.vis=function(e){return arguments.length?(this.set({vis:e}),this):this.get().vis},t.prototype.locale=function(e,t){return arguments.length&&(this._locale=e=e.replace("_","-"),window.Globalize&&loadGlobalizeLocale(e,t)),this._locale},t.prototype.getMetadata=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n=this.get().metadata;if(!e)return n;var r=n;return _some(e.split("."),function(e){return!(!_isUndefined(r)&&!_isNull(r))||(r=r[e],!1)}),_isUndefined(r)||_isNull(r)?t:r},t.prototype.setMetadata=function(e,t){var n=e.split("."),r=n.pop(),a=this.get().metadata,i=a;return n.forEach(function(e){(_isUndefined(i[e])||_isNull(i[e]))&&(i[e]={}),i=i[e]}),is_equal(i[r],t)||(i[r]=t,this.set({metadata:a})),this},t.prototype.store=function(e){storeChanges(this,e)},t.prototype.storeData=function(e){storeData(this,e)},t.prototype.serialize=function(){var e=this.get(),t={};return["id","title","theme","createdAt","lastModifiedAt","type","metadata","authorId","showInGallery","language","guestSession","lastEditStep","publishedAt","publicUrl","publicVersion","organizationId","forkedFrom","externalData","forkable","isFork","inFolder","author"].forEach(function(n){t[n]=e[n]}),t},t.prototype.passiveMode=function(){var e=this;this.set({passiveMode:!0}),setTimeout(function(){return e.set({passiveMode:!1})},100)},t.prototype.isPassive=function(){return this.get().passiveMode},t.prototype.rawData=function(){return this.get()._rawData},t}(Store);function is_equal(e,t){return JSON.stringify(e)===JSON.stringify(t)}Chart.prototype.observeDeep=observeDeep;var data$14={},main={App:ChartEditor,Chart:Chart,data:data$14,utils:{getJSON:getJSON}};return main});
